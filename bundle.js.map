{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/js-year-calendar/dist/js-year-calendar.js","webpack:///./node_modules/js-year-calendar/locales/js-year-calendar.fr.js","webpack:///./src/renderCalendar.ts","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_exports","_typeof","obj","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_defineProperty","default","NodeList","forEach","callback","thisArg","window","this","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","el","document","documentElement","contains","parentElement","parentNode","nodeType","Calendar","element","options","arguments","undefined","HTMLElement","Error","querySelector","classList","add","_initializeEvents","_initializeOptions","setYear","startYear","protoProps","staticProps","opt","isNaN","parseInt","Date","getFullYear","minDate","maxDate","language","locales","allowOverlap","displayWeekNumber","displayDisabledDataSource","displayHeader","alwaysHalfDay","enableRangeSelection","disabledDays","Array","disabledWeekDays","hiddenWeekDays","roundRangeLimits","dataSource","style","enableContextMenu","contextMenuItems","customDayRenderer","customDataSourceRenderer","weekStart","loadingTemplate","_dataSource","_initializeDatasourceColors","yearChanged","addEventListener","renderEnd","clickDay","dayContextMenu","selectRange","mouseOnDay","mouseOutDay","getDataSource","result","then","color","colors","isLoading","firstChild","removeChild","_renderHeader","_renderLoading","_renderBody","_renderDataSource","_applyEvents","months","opacity","display","transition","setTimeout","_triggerEvent","currentYear","header","createElement","headerTable","prevDiv","prevIcon","innerHTML","appendChild","prev2YearDiv","textContent","toString","prevYearDiv","yearDiv","nextYearDiv","next2YearDiv","nextDiv","nextIcon","monthsDiv","monthDiv","dataset","monthId","_nbCols","concat","firstDate","table","thead","titleRow","titleCell","setAttribute","headerRow","weekNumberCell","weekShort","headerCell","daysMin","_isHidden","currentDate","getTime","lastDate","getDay","setDate","getDate","row","currentThursday","getWeekNumber","cell","_isDisabled","cellContent","container","minHeight","loading","spinner","bounce","_this","querySelectorAll","month","monthData","startDate","endDate","push","day","nextDate","dayData","_renderDataSourceDay","elt","events","parent","weight","boxShadow","backgroundColor","currentTime","startHalfDay","otherColor","background","endHalfDay","_this2","e","currentTarget","marginLeft","visibility","stopPropagation","date","_getDate","getEvents","preventDefault","_openContextMenu","which","isThereFreeSlot","_mouseDown","_rangeStart","_rangeEnd","_refreshRange","newDate","getMonth","oldValue","getEventsOnRange","_responsiveInterval","clearInterval","setInterval","calendarSize","offsetWidth","monthSize","className","remove","_this3","top","left","offsetTop","offsetLeft","offsetParent","contextMenu","body","eventItem","borderLeft","eventItemContent","text","icon","_renderContextMenuItems","children","position","_getElementPosition","once","items","evt","subMenu","visible","menuItem","menuItemContent","click","index","year","eventName","parameters","event","Event","createEvent","initEvent","calendar","dispatchEvent","workingDate","setHours","week1","Math","round","_this4","after","some","_this5","parsedYear","eventResult","preventRendering","render","_fetchDataSource","_this6","en","days","daysShort","monthsShort","maxVar1000Nuitées","fiestas","currentDep","setCurrentDep","_currentDep","reqError","err","console","log","renderCalendar","depNumber","valueType","renderVariations","getElementById","calendarInner","flexWrap","justifyContent","alignContent","filter","fiesta","dep","textDecoration","content","fiestaStr","filteredFiestas","$","popover","placement","trigger","html","varNuitées","dateISOToDate","dateStr","dateArr","split","Number","varNuitéesToColor","varNuitée","nbVar","maxVar","frac","min","abs","floor","varNuitéesToLuminanceHue","oReqOrigin","XMLHttpRequest","onload","csvFile","responseText","values","id","maxVal","max","valAbsNuitéesToColor","setDataSource","onerror","open","send","currentValueType","renderGraphAndCalendar","oReqFiestas","dateFrToDate","loadEventsAndNuitées","selectElement","_event"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,kBClFrD,UAEI,EAAO,CAAC,QAAmB,0BAAP,EAUf,SAAUC,GACjB,aAOA,SAASC,EAAQC,GAAwT,OAAtOD,EAArD,mBAAXlB,QAAoD,iBAApBA,OAAOoB,SAAmC,SAAiBD,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXnB,QAAyBmB,EAAIE,cAAgBrB,QAAUmB,IAAQnB,OAAOa,UAAY,gBAAkBM,IAAyBA,GAExV,SAASG,EAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAEhH,SAASC,EAAkBC,EAAQC,GAAS,IAAK,IAAI3C,EAAI,EAAGA,EAAI2C,EAAMC,OAAQ5C,IAAK,CAAE,IAAI6C,EAAaF,EAAM3C,GAAI6C,EAAWjC,WAAaiC,EAAWjC,aAAc,EAAOiC,EAAWC,cAAe,EAAU,UAAWD,IAAYA,EAAWE,UAAW,GAAMrC,OAAOC,eAAe+B,EAAQG,EAAWtB,IAAKsB,IAI7S,SAASG,EAAgBd,EAAKX,EAAKN,GAAiK,OAApJM,KAAOW,EAAOxB,OAAOC,eAAeuB,EAAKX,EAAK,CAAEN,MAAOA,EAAOL,YAAY,EAAMkC,cAAc,EAAMC,UAAU,IAAkBb,EAAIX,GAAON,EAAgBiB,EAgC3M,GA7CAxB,OAAOC,eAAeqB,EAAU,aAAc,CAC5Cf,OAAO,IAETe,EAASiB,aAAU,EA+BK,oBAAbC,UAA6BA,SAAStB,UAAUuB,UACzDD,SAAStB,UAAUuB,QAAU,SAAUC,EAAUC,GAC/CA,EAAUA,GAAWC,OAErB,IAAK,IAAItD,EAAI,EAAGA,EAAIuD,KAAKX,OAAQ5C,IAC/BoD,EAASjD,KAAKkD,EAASE,KAAKvD,GAAIA,EAAGuD,QAMlB,oBAAZC,UAA4BA,QAAQ5B,UAAU6B,QAAS,CAChE,IAAI7B,EAAY4B,QAAQ5B,UACxB4B,QAAQ5B,UAAU6B,QAAU7B,EAAU8B,mBAAqB9B,EAAU+B,sBAGhD,oBAAZH,SAA4BA,QAAQ5B,UAAUgC,UACvDJ,QAAQ5B,UAAUgC,QAAU,SAAU7B,GACpC,IAAI8B,EAAKN,KACT,IAAKO,SAASC,gBAAgBC,SAASH,GAAK,OAAO,KAEnD,EAAG,CACD,GAAIA,EAAGJ,QAAQ1B,GAAI,OAAO8B,EAC1BA,EAAKA,EAAGI,eAAiBJ,EAAGK,iBACd,OAAPL,GAA8B,GAAfA,EAAGM,UAE3B,OAAO,OAQX,IAAIC,EAEJ,WA4FE,SAASA,EAASC,GAChB,IAAIC,EAAUC,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAkClF,GAhCAlC,EAAgBkB,KAAMa,GAEtBpB,EAAgBO,KAAM,eAAW,GAEjCP,EAAgBO,KAAM,eAAW,GAEjCP,EAAgBO,KAAM,mBAAe,GAErCP,EAAgBO,KAAM,kBAAc,GAEpCP,EAAgBO,KAAM,mBAAe,GAErCP,EAAgBO,KAAM,iBAAa,GAEnCP,EAAgBO,KAAM,2BAAuB,GAE7CP,EAAgBO,KAAM,eAAW,GAEjCP,EAAgBO,KAAM,gBAAY,GAElCP,EAAgBO,KAAM,sBAAkB,GAExCP,EAAgBO,KAAM,kBAAc,GAEpCP,EAAgBO,KAAM,mBAAe,GAErCP,EAAgBO,KAAM,iBAAa,GAEnCP,EAAgBO,KAAM,mBAAe,GAErCP,EAAgBO,KAAM,mBAAe,GAEjCc,aAAmBI,YACrBlB,KAAKc,QAAUA,MACV,IAAuB,iBAAZA,EAGhB,MAAM,IAAIK,MAAM,4DAFhBnB,KAAKc,QAAUP,SAASa,cAAcN,GAKxCd,KAAKc,QAAQO,UAAUC,IAAI,YAE3BtB,KAAKuB,kBAAkBR,GAEvBf,KAAKwB,mBAAmBT,GAExBf,KAAKyB,QAAQzB,KAAKe,QAAQW,WAxM9B,IAAsB1C,EAAa2C,EAAYC,EA43D7C,OA53DoB5C,EA2MP6B,GA3MoBc,EA2MV,CAAC,CACtB3D,IAAK,qBACLN,MAAO,SAA4BmE,GACtB,MAAPA,IACFA,EAAM,IAGR7B,KAAKe,QAAU,CACbW,UAAYI,MAAMC,SAASF,EAAIH,aAAwC,IAAIM,MAAOC,cAArCF,SAASF,EAAIH,WAC1DQ,QAASL,EAAIK,mBAAmBF,KAAOH,EAAIK,QAAU,KACrDC,QAASN,EAAIM,mBAAmBH,KAAOH,EAAIM,QAAU,KACrDC,SAA0B,MAAhBP,EAAIO,UAAsD,MAAlCvB,EAASwB,QAAQR,EAAIO,UAAoBP,EAAIO,SAAW,KAC1FE,aAAkC,MAApBT,EAAIS,cAAuBT,EAAIS,aAC7CC,kBAA4C,MAAzBV,EAAIU,mBAA4BV,EAAIU,kBACvDC,0BAA4D,MAAjCX,EAAIW,2BAAoCX,EAAIW,0BACvEC,cAAoC,MAArBZ,EAAIY,eAAwBZ,EAAIY,cAC/CC,cAAoC,MAArBb,EAAIa,eAAwBb,EAAIa,cAC/CC,qBAAkD,MAA5Bd,EAAIc,sBAA+Bd,EAAIc,qBAC7DC,aAAcf,EAAIe,wBAAwBC,MAAQhB,EAAIe,aAAe,GACrEE,iBAAkBjB,EAAIiB,4BAA4BD,MAAQhB,EAAIiB,iBAAmB,GACjFC,eAAgBlB,EAAIkB,0BAA0BF,MAAQhB,EAAIkB,eAAiB,GAC3EC,iBAA0C,MAAxBnB,EAAImB,kBAA2BnB,EAAImB,iBACrDC,WAAYpB,EAAIoB,sBAAsBJ,OAAmC,mBAAnBhB,EAAIoB,WAA4BpB,EAAIoB,WAAa,GACvGC,MAAoB,cAAbrB,EAAIqB,OAAsC,UAAbrB,EAAIqB,OAAkC,UAAbrB,EAAIqB,MAAoBrB,EAAIqB,MAAQ,SACjGC,kBAA4C,MAAzBtB,EAAIsB,mBAA4BtB,EAAIsB,kBACvDC,iBAAkBvB,EAAIuB,4BAA4BP,MAAQhB,EAAIuB,iBAAmB,GACjFC,kBAAoD,mBAA1BxB,EAAIwB,kBAAmCxB,EAAIwB,kBAAoB,KACzFC,yBAAkE,mBAAjCzB,EAAIyB,yBAA0CzB,EAAIyB,yBAA2B,KAC9GC,UAAYzB,MAAMC,SAASF,EAAI0B,YAAwC,KAA1BxB,SAASF,EAAI0B,WAC1DC,gBAAgD,iBAAxB3B,EAAI2B,iBAAgC3B,EAAI2B,2BAA2BtC,YAAcW,EAAI2B,gBAAkB,MAG7HxD,KAAKe,QAAQkC,sBAAsBJ,QACrC7C,KAAKyD,YAAczD,KAAKe,QAAQkC,WAEhCjD,KAAK0D,iCAGR,CACD1F,IAAK,oBACLN,MAAO,SAA2BmE,GACrB,MAAPA,IACFA,EAAM,IAGJA,EAAI8B,aACN3D,KAAKc,QAAQ8C,iBAAiB,cAAe/B,EAAI8B,aAG/C9B,EAAIgC,WACN7D,KAAKc,QAAQ8C,iBAAiB,YAAa/B,EAAIgC,WAG7ChC,EAAIiC,UACN9D,KAAKc,QAAQ8C,iBAAiB,WAAY/B,EAAIiC,UAG5CjC,EAAIkC,gBACN/D,KAAKc,QAAQ8C,iBAAiB,iBAAkB/B,EAAIkC,gBAGlDlC,EAAImC,aACNhE,KAAKc,QAAQ8C,iBAAiB,cAAe/B,EAAImC,aAG/CnC,EAAIoC,YACNjE,KAAKc,QAAQ8C,iBAAiB,aAAc/B,EAAIoC,YAG9CpC,EAAIqC,aACNlE,KAAKc,QAAQ8C,iBAAiB,cAAe/B,EAAIqC,eAGpD,CACDlG,IAAK,mBACLN,MAAO,SAA0BmC,GAC/B,GAAuC,mBAA5BG,KAAKe,QAAQkC,WAA2B,CACjD,IAAIkB,EAAgBnE,KAAKe,QAAQkC,WAEjC,GAA4B,GAAxBkB,EAAc9E,OAEhB8E,EAAcnE,KAAKe,QAAQW,UAAW7B,OACjC,CAEL,IAAIuE,EAASD,EAAcnE,KAAKe,QAAQW,WAEpC0C,aAAkBvB,MACpBhD,EAASuE,GAETA,EAAOC,KAAKxE,SAIhBA,EAASG,KAAKe,QAAQkC,cAGzB,CACDjF,IAAK,8BACLN,MAAO,WACL,IAAK,IAAIjB,EAAI,EAAGA,EAAIuD,KAAKyD,YAAYpE,OAAQ5C,IACV,MAA7BuD,KAAKyD,YAAYhH,GAAG6H,QACtBtE,KAAKyD,YAAYhH,GAAG6H,MAAQzD,EAAS0D,OAAO9H,EAAIoE,EAAS0D,OAAOlF,WAQrE,CACDrB,IAAK,SACLN,MAAO,WAIL,IAHA,IAAI8G,EAAYxD,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GAGxEhB,KAAKc,QAAQ2D,YAClBzE,KAAKc,QAAQ4D,YAAY1E,KAAKc,QAAQ2D,YAOxC,GAJIzE,KAAKe,QAAQ0B,eACfzC,KAAK2E,gBAGHH,EACFxE,KAAK4E,qBACA,CACL5E,KAAK6E,cAEL7E,KAAK8E,oBAEL9E,KAAK+E,eAGL,IAAIC,EAAShF,KAAKc,QAAQM,cAAc,qBACxC4D,EAAO9B,MAAM+B,QAAU,IACvBD,EAAO9B,MAAMgC,QAAU,QACvBF,EAAO9B,MAAMiC,WAAa,eAC1BC,YAAW,WACTJ,EAAO9B,MAAM+B,QAAU,IACvBG,YAAW,WACT,OAAOJ,EAAO9B,MAAMiC,WAAa,KAChC,OACF,GAEHnF,KAAKqF,cAAc,YAAa,CAC9BC,YAAatF,KAAKe,QAAQW,eAI/B,CACD1D,IAAK,gBACLN,MAAO,WACL,IAAI6H,EAAShF,SAASiF,cAAc,OACpCD,EAAOlE,UAAUC,IAAI,mBACrB,IAAImE,EAAclF,SAASiF,cAAc,SACrCE,EAAUnF,SAASiF,cAAc,MACrCE,EAAQrE,UAAUC,IAAI,QAEM,MAAxBtB,KAAKe,QAAQmB,SAAmBlC,KAAKe,QAAQmB,QAAU,IAAIF,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,GAAI,KAClGgE,EAAQrE,UAAUC,IAAI,YAGxB,IAAIqE,EAAWpF,SAASiF,cAAc,QACtCG,EAASC,UAAY,WACrBF,EAAQG,YAAYF,GACpBF,EAAYI,YAAYH,GACxB,IAAII,EAAevF,SAASiF,cAAc,MAC1CM,EAAazE,UAAUC,IAAI,cAC3BwE,EAAazE,UAAUC,IAAI,kBAC3BwE,EAAaC,aAAe/F,KAAKe,QAAQW,UAAY,GAAGsE,WAE5B,MAAxBhG,KAAKe,QAAQmB,SAAmBlC,KAAKe,QAAQmB,QAAU,IAAIF,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,GAAI,KAClGoE,EAAazE,UAAUC,IAAI,YAG7BmE,EAAYI,YAAYC,GACxB,IAAIG,EAAc1F,SAASiF,cAAc,MACzCS,EAAY5E,UAAUC,IAAI,cAC1B2E,EAAY5E,UAAUC,IAAI,iBAC1B2E,EAAYF,aAAe/F,KAAKe,QAAQW,UAAY,GAAGsE,WAE3B,MAAxBhG,KAAKe,QAAQmB,SAAmBlC,KAAKe,QAAQmB,QAAU,IAAIF,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,GAAI,KAClGuE,EAAY5E,UAAUC,IAAI,YAG5BmE,EAAYI,YAAYI,GACxB,IAAIC,EAAU3F,SAASiF,cAAc,MACrCU,EAAQ7E,UAAUC,IAAI,cACtB4E,EAAQH,YAAc/F,KAAKe,QAAQW,UAAUsE,WAC7CP,EAAYI,YAAYK,GACxB,IAAIC,EAAc5F,SAASiF,cAAc,MACzCW,EAAY9E,UAAUC,IAAI,cAC1B6E,EAAY9E,UAAUC,IAAI,iBAC1B6E,EAAYJ,aAAe/F,KAAKe,QAAQW,UAAY,GAAGsE,WAE3B,MAAxBhG,KAAKe,QAAQoB,SAAmBnC,KAAKe,QAAQoB,QAAU,IAAIH,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,EAAG,IACjGyE,EAAY9E,UAAUC,IAAI,YAG5BmE,EAAYI,YAAYM,GACxB,IAAIC,EAAe7F,SAASiF,cAAc,MAC1CY,EAAa/E,UAAUC,IAAI,cAC3B8E,EAAa/E,UAAUC,IAAI,kBAC3B8E,EAAaL,aAAe/F,KAAKe,QAAQW,UAAY,GAAGsE,WAE5B,MAAxBhG,KAAKe,QAAQoB,SAAmBnC,KAAKe,QAAQoB,QAAU,IAAIH,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,EAAG,IACjG0E,EAAa/E,UAAUC,IAAI,YAG7BmE,EAAYI,YAAYO,GACxB,IAAIC,EAAU9F,SAASiF,cAAc,MACrCa,EAAQhF,UAAUC,IAAI,QAEM,MAAxBtB,KAAKe,QAAQoB,SAAmBnC,KAAKe,QAAQoB,QAAU,IAAIH,KAAKhC,KAAKe,QAAQW,UAAY,EAAG,EAAG,IACjG2E,EAAQhF,UAAUC,IAAI,YAGxB,IAAIgF,EAAW/F,SAASiF,cAAc,QACtCc,EAASV,UAAY,WACrBS,EAAQR,YAAYS,GACpBb,EAAYI,YAAYQ,GACxBd,EAAOM,YAAYJ,GACnBzF,KAAKc,QAAQ+E,YAAYN,KAE1B,CACDvH,IAAK,cACLN,MAAO,WACL,IAAI6I,EAAYhG,SAASiF,cAAc,OACvCe,EAAUlF,UAAUC,IAAI,oBAExB,IAAK,IAAIzE,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,IAAI2J,EAAWjG,SAASiF,cAAc,OACtCgB,EAASnF,UAAUC,IAAI,mBACvBkF,EAASC,QAAQC,QAAU7J,EAAEmJ,WAEzBhG,KAAK2G,SACPH,EAASnF,UAAUC,IAAI,SAASsF,OAAO5G,KAAK2G,UAG9C,IAAIE,EAAY,IAAI7E,KAAKhC,KAAKe,QAAQW,UAAW7E,EAAG,GAChDiK,EAAQvG,SAASiF,cAAc,SACnCsB,EAAMzF,UAAUC,IAAI,SAGpB,IAAIyF,EAAQxG,SAASiF,cAAc,SAC/BwB,EAAWzG,SAASiF,cAAc,MAClCyB,EAAY1G,SAASiF,cAAc,MACvCyB,EAAU5F,UAAUC,IAAI,eACxB2F,EAAUC,aAAa,UAAWlH,KAAKe,QAAQwB,kBAAoB,IAAM,KACzE0E,EAAUlB,YAAclF,EAASwB,QAAQrC,KAAKe,QAAQqB,UAAU4C,OAAOnI,GACvEmK,EAASnB,YAAYoB,GACrBF,EAAMlB,YAAYmB,GAClB,IAAIG,EAAY5G,SAASiF,cAAc,MAEnCxF,KAAKe,QAAQwB,qBACX6E,EAAiB7G,SAASiF,cAAc,OAC7BnE,UAAUC,IAAI,eAC7B8F,EAAerB,YAAclF,EAASwB,QAAQrC,KAAKe,QAAQqB,UAAUiF,UACrEF,EAAUtB,YAAYuB,IAGxB,IAAI7D,EAAYvD,KAAKe,QAAQwC,UAAYvD,KAAKe,QAAQwC,UAAY1C,EAASwB,QAAQrC,KAAKe,QAAQqB,UAAUmB,UACtGxG,EAAIwG,EAER,EAAG,CACD,IAAI+D,EAAa/G,SAASiF,cAAc,MACxC8B,EAAWjG,UAAUC,IAAI,cACzBgG,EAAWvB,YAAclF,EAASwB,QAAQrC,KAAKe,QAAQqB,UAAUmF,QAAQxK,GAErEiD,KAAKwH,UAAUzK,IACjBuK,EAAWjG,UAAUC,IAAI,UAG3B6F,EAAUtB,YAAYyB,KACtBvK,GACS,IAAGA,EAAI,SACTA,GAAKwG,GAEdwD,EAAMlB,YAAYsB,GAClBL,EAAMjB,YAAYkB,GAMlB,IAHA,IAAIU,EAAc,IAAIzF,KAAK6E,EAAUa,WACjCC,EAAW,IAAI3F,KAAKhC,KAAKe,QAAQW,UAAW7E,EAAI,EAAG,GAEhD4K,EAAYG,UAAYrE,GAC7BkE,EAAYI,QAAQJ,EAAYK,UAAY,GAG9C,KAAOL,GAAeE,GAAU,CAC9B,IAAII,EAAMxH,SAASiF,cAAc,MAEjC,GAAIxF,KAAKe,QAAQwB,kBAAmB,CAClC,IAAI6E,EAAiB7G,SAASiF,cAAc,MACxCwC,EAAkB,IAAIhG,KAAKyF,EAAYC,WAE3CM,EAAgBH,QAAQG,EAAgBF,UAAYvE,EAAY,GAChE6D,EAAe/F,UAAUC,IAAI,eAC7B8F,EAAerB,YAAc/F,KAAKiI,cAAcD,GAAiBhC,WACjE+B,EAAIlC,YAAYuB,GAGlB,EAAG,CACD,IAAIc,EAAO3H,SAASiF,cAAc,MAOlC,GANA0C,EAAK7G,UAAUC,IAAI,OAEftB,KAAKwH,UAAUC,EAAYG,WAC7BM,EAAK7G,UAAUC,IAAI,UAGjBmG,EAAcZ,EAChBqB,EAAK7G,UAAUC,IAAI,YACd,GAAImG,EAAcE,EACvBO,EAAK7G,UAAUC,IAAI,WACd,CACDtB,KAAKmI,YAAYV,IACnBS,EAAK7G,UAAUC,IAAI,YAGrB,IAAI8G,EAAc7H,SAASiF,cAAc,OACzC4C,EAAY/G,UAAUC,IAAI,eAC1B8G,EAAYrC,YAAc0B,EAAYK,UAAU9B,WAChDkC,EAAKrC,YAAYuC,GAEbpI,KAAKe,QAAQsC,mBACfrD,KAAKe,QAAQsC,kBAAkB+E,EAAaX,GAIhDM,EAAIlC,YAAYqC,GAChBT,EAAYI,QAAQJ,EAAYK,UAAY,SACrCL,EAAYG,UAAYrE,GAEjCuD,EAAMjB,YAAYkC,GAGpBvB,EAASX,YAAYiB,GACrBP,EAAUV,YAAYW,GAGxBxG,KAAKc,QAAQ+E,YAAYU,KAE1B,CACDvI,IAAK,iBACLN,MAAO,WACL,IAAI2K,EAAY9H,SAASiF,cAAc,OACvC6C,EAAUhH,UAAUC,IAAI,8BACxB+G,EAAUnF,MAAMoF,UAA2B,IAAftI,KAAK2G,QAAgB,KACjD,IAAI4B,EAAUhI,SAASiF,cAAc,OAGrC,GAFA+C,EAAQlH,UAAUC,IAAI,oBAElBtB,KAAKe,QAAQyC,gBAC6B,iBAAjCxD,KAAKe,QAAQyC,gBACtB+E,EAAQ3C,UAAY5F,KAAKe,QAAQyC,gBACxBxD,KAAKe,QAAQyC,2BAA2BtC,aACjDqH,EAAQ1C,YAAY7F,KAAKe,QAAQyC,qBAE9B,CACL,IAAIgF,EAAUjI,SAASiF,cAAc,OACrCgD,EAAQnH,UAAUC,IAAI,oBAEtB,IAAK,IAAI7E,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,IAAIgM,EAASlI,SAASiF,cAAc,OACpCiD,EAAOpH,UAAUC,IAAI,SAASsF,OAAOnK,IACrC+L,EAAQ3C,YAAY4C,GAGtBF,EAAQ1C,YAAY2C,GAGtBH,EAAUxC,YAAY0C,GACtBvI,KAAKc,QAAQ+E,YAAYwC,KAE1B,CACDrK,IAAK,oBACLN,MAAO,WACL,IAAIgL,EAAQ1I,KAEY,MAApBA,KAAKyD,aAAuBzD,KAAKyD,YAAYpE,OAAS,GACxDW,KAAKc,QAAQ6H,iBAAiB,oBAAoB/I,SAAQ,SAAUgJ,GAClE,IAAIlC,EAAU3E,SAAS6G,EAAMnC,QAAQC,SACjCG,EAAY,IAAI7E,KAAK0G,EAAM3H,QAAQW,UAAWgF,EAAS,GACvDiB,EAAW,IAAI3F,KAAK0G,EAAM3H,QAAQW,UAAWgF,EAAU,EAAG,GAE9D,IAA8B,MAAzBgC,EAAM3H,QAAQmB,SAAmByF,EAAWe,EAAM3H,QAAQmB,WAAsC,MAAzBwG,EAAM3H,QAAQoB,SAAmB0E,GAAa6B,EAAM3H,QAAQoB,SAAU,CAGhJ,IAFA,IAAI0G,EAAY,GAEPpM,EAAI,EAAGA,EAAIiM,EAAMjF,YAAYpE,OAAQ5C,IACtCiM,EAAMjF,YAAYhH,GAAGqM,WAAanB,KAAae,EAAMjF,YAAYhH,GAAGsM,QAAUlC,IAClFgC,EAAUG,KAAKN,EAAMjF,YAAYhH,IAIjCoM,EAAUxJ,OAAS,GACrBuJ,EAAMD,iBAAiB,gBAAgB/I,SAAQ,SAAUqJ,GACvD,IAAIxB,EAAc,IAAIzF,KAAK0G,EAAM3H,QAAQW,UAAWgF,EAAS3E,SAASkH,EAAIlD,cACtEmD,EAAW,IAAIlH,KAAK0G,EAAM3H,QAAQW,UAAWgF,EAASe,EAAYK,UAAY,GAC9EqB,EAAU,GAEd,IAA8B,MAAzBT,EAAM3H,QAAQmB,SAAmBuF,GAAeiB,EAAM3H,QAAQmB,WAAsC,MAAzBwG,EAAM3H,QAAQoB,SAAmBsF,GAAeiB,EAAM3H,QAAQoB,SAAU,CACtJ,IAAK,IAAI1F,EAAI,EAAGA,EAAIoM,EAAUxJ,OAAQ5C,IAChCoM,EAAUpM,GAAGqM,UAAYI,GAAYL,EAAUpM,GAAGsM,SAAWtB,GAC/D0B,EAAQH,KAAKH,EAAUpM,IAIvB0M,EAAQ9J,OAAS,IAAMqJ,EAAM3H,QAAQyB,4BAA8BkG,EAAMP,YAAYV,KACvFiB,EAAMU,qBAAqBH,EAAKxB,EAAa0B,aAS5D,CACDnL,IAAK,uBACLN,MAAO,SAA8B2L,EAAK5B,EAAa6B,GACrD,IAAIC,EAASF,EAAI3I,cAEjB,OAAQV,KAAKe,QAAQmC,OACnB,IAAK,SACH,IAAIsG,EAAS,EAUb,GARqB,GAAjBF,EAAOjK,OACTmK,EAAS,EACAF,EAAOjK,QAAU,EAC1BmK,EAAS,EAETD,EAAOrG,MAAMuG,UAAY,yBAGvBD,EAAS,EAAG,CAGd,IAFA,IAAIC,EAAY,GAEPhN,EAAI,EAAGA,EAAI6M,EAAOjK,OAAQ5C,IAChB,IAAbgN,IACFA,GAAa,KAGfA,GAAa,YAAY7C,QAAQnK,EAAI,GAAK+M,EAAQ,WAAW5C,OAAO0C,EAAO7M,GAAG6H,OAGhFiF,EAAOrG,MAAMuG,UAAYA,EAG3B,MAEF,IAAK,aACHF,EAAOrG,MAAMwG,gBAAkBJ,EAAOA,EAAOjK,OAAS,GAAGiF,MACzD,IAAIqF,EAAclC,EAAYC,UAE9B,GAAI4B,EAAOA,EAAOjK,OAAS,GAAGyJ,UAAUpB,WAAaiC,EAGnD,GAFAJ,EAAOlI,UAAUC,IAAI,aAEjBgI,EAAOA,EAAOjK,OAAS,GAAGuK,cAAgB5J,KAAKe,QAAQ2B,cAAe,CACxE6G,EAAOlI,UAAUC,IAAI,YAErB,IAAIuI,EAAa,cAEjB,IAASpN,EAAI6M,EAAOjK,OAAS,EAAG5C,GAAK,EAAGA,IACtC,GAAI6M,EAAO7M,GAAGqM,UAAUpB,WAAaiC,IAAgBL,EAAO7M,GAAGmN,eAAiB5J,KAAKe,QAAQ2B,cAAe,CAC1GmH,EAAaP,EAAO7M,GAAG6H,MACvB,MAIJiF,EAAOrG,MAAM4G,WAAa,2BAA2BlD,OAAO0C,EAAOA,EAAOjK,OAAS,GAAGiF,MAAO,MAAMsC,OAAO0C,EAAOA,EAAOjK,OAAS,GAAGiF,MAAO,UAAUsC,OAAOiD,EAAY,UAAUjD,OAAOiD,EAAY,UAC5L7J,KAAKe,QAAQiC,kBACtBuG,EAAOlI,UAAUC,IAAI,mBAElB,GAAIgI,EAAOA,EAAOjK,OAAS,GAAG0J,QAAQrB,WAAaiC,EAGxD,GAFAJ,EAAOlI,UAAUC,IAAI,WAEjBgI,EAAOA,EAAOjK,OAAS,GAAG0K,YAAc/J,KAAKe,QAAQ2B,cAAe,CAKtE,IAJA6G,EAAOlI,UAAUC,IAAI,YAEjBuI,EAAa,cAERpN,EAAI6M,EAAOjK,OAAS,EAAG5C,GAAK,EAAGA,IACtC,GAAI6M,EAAO7M,GAAGsM,QAAQrB,WAAaiC,IAAgBL,EAAO7M,GAAGsN,aAAe/J,KAAKe,QAAQ2B,cAAe,CACtGmH,EAAaP,EAAO7M,GAAG6H,MACvB,MAIJiF,EAAOrG,MAAM4G,WAAa,2BAA2BlD,OAAO0C,EAAOA,EAAOjK,OAAS,GAAGiF,MAAO,MAAMsC,OAAO0C,EAAOA,EAAOjK,OAAS,GAAGiF,MAAO,UAAUsC,OAAOiD,EAAY,UAAUjD,OAAOiD,EAAY,UAC5L7J,KAAKe,QAAQiC,kBACtBuG,EAAOlI,UAAUC,IAAI,eAIzB,MAEF,IAAK,SACCtB,KAAKe,QAAQuC,0BACftD,KAAKe,QAAQuC,yBAAyB1G,KAAKoD,KAAMqJ,EAAK5B,EAAa6B,MAM1E,CACDtL,IAAK,eACLN,MAAO,WACL,IAAIsM,EAAShK,KAETA,KAAKe,QAAQ0B,gBAEfzC,KAAKc,QAAQ6H,iBAAiB,mCAAmC/I,SAAQ,SAAUkB,GACjFA,EAAQ8C,iBAAiB,SAAS,SAAUqG,GACrCA,EAAEC,cAAc7I,UAAUZ,SAAS,aACtCuJ,EAAOvI,QAAQM,SAASkI,EAAEC,cAAcnE,oBAI9C/F,KAAKc,QAAQM,cAAc,0BAA0BwC,iBAAiB,SAAS,SAAUqG,GACvF,IAAKA,EAAEC,cAAc7I,UAAUZ,SAAS,YAAa,CACnD,IAAIuE,EAASgF,EAAOlJ,QAAQM,cAAc,qBAE1C4D,EAAO9B,MAAMiC,WAAa,mBAC1BH,EAAO9B,MAAMiH,WAAa,OAC1B/E,YAAW,WACTJ,EAAO9B,MAAMkH,WAAa,SAC1BpF,EAAO9B,MAAMiC,WAAa,GAC1BH,EAAO9B,MAAMiH,WAAa,IAC1B/E,YAAW,WACT4E,EAAOvI,QAAQuI,EAAOjJ,QAAQW,UAAY,KACzC,MACF,SAGP1B,KAAKc,QAAQM,cAAc,0BAA0BwC,iBAAiB,SAAS,SAAUqG,GACvF,IAAKA,EAAEC,cAAc7I,UAAUZ,SAAS,YAAa,CACnD,IAAIuE,EAASgF,EAAOlJ,QAAQM,cAAc,qBAE1C4D,EAAO9B,MAAMiC,WAAa,mBAC1BH,EAAO9B,MAAMiH,WAAa,QAC1B/E,YAAW,WACTJ,EAAO9B,MAAMkH,WAAa,SAC1BpF,EAAO9B,MAAMiC,WAAa,GAC1BH,EAAO9B,MAAMiH,WAAa,IAC1B/E,YAAW,WACT4E,EAAOvI,QAAQuI,EAAOjJ,QAAQW,UAAY,KACzC,MACF,UAKG1B,KAAKc,QAAQ6H,iBAAiB,2CACpC/I,SAAQ,SAAUsI,GAEtBA,EAAKtE,iBAAiB,SAAS,SAAUqG,GACvCA,EAAEI,kBAEF,IAAIC,EAAON,EAAOO,SAASN,EAAEC,eAE7BF,EAAO3E,cAAc,WAAY,CAC/BvE,QAASmJ,EAAEC,cACXI,KAAMA,EACNhB,OAAQU,EAAOQ,UAAUF,QAK7BpC,EAAKtE,iBAAiB,eAAe,SAAUqG,GACzCD,EAAOjJ,QAAQoC,oBACjB8G,EAAEQ,iBAEET,EAAOjJ,QAAQqC,iBAAiB/D,OAAS,GAC3C2K,EAAOU,iBAAiBT,EAAEC,gBAI9B,IAAII,EAAON,EAAOO,SAASN,EAAEC,eAE7BF,EAAO3E,cAAc,iBAAkB,CACrCvE,QAASmJ,EAAEC,cACXI,KAAMA,EACNhB,OAAQU,EAAOQ,UAAUF,QAKzBN,EAAOjJ,QAAQ4B,uBACjBuF,EAAKtE,iBAAiB,aAAa,SAAUqG,GAC3C,GAAe,GAAXA,EAAEU,MAAY,CAChB,IAAIlD,EAAcuC,EAAOO,SAASN,EAAEC,gBAEhCF,EAAOjJ,QAAQuB,cAAgB0H,EAAOY,gBAAgBnD,MACxDuC,EAAOa,YAAa,EACpBb,EAAOc,YAAcd,EAAOe,UAAYtD,EAExCuC,EAAOgB,qBAIb9C,EAAKtE,iBAAiB,cAAc,SAAUqG,GAC5C,GAAID,EAAOa,WAAY,CACrB,IAAIpD,EAAcuC,EAAOO,SAASN,EAAEC,eAEpC,IAAKF,EAAOjJ,QAAQuB,aAAc,CAChC,IAAI2I,EAAU,IAAIjJ,KAAKgI,EAAOc,YAAYpD,WAE1C,GAAIuD,EAAUxD,EAGZ,IAFA,IAAIyB,EAAW,IAAIlH,KAAKiJ,EAAQhJ,cAAegJ,EAAQC,WAAYD,EAAQnD,UAAY,GAEhFmD,EAAUxD,GACVuC,EAAOY,gBAAgB1B,GAAU,IAItC+B,EAAQpD,QAAQoD,EAAQnD,UAAY,GACpCoB,EAASrB,QAAQqB,EAASpB,UAAY,QAKxC,IAFIoB,EAAW,IAAIlH,KAAKiJ,EAAQhJ,cAAegJ,EAAQC,WAAYD,EAAQnD,UAAY,GAEhFmD,EAAUxD,GACVuC,EAAOY,gBAAgB1B,GAAU,IAItC+B,EAAQpD,QAAQoD,EAAQnD,UAAY,GACpCoB,EAASrB,QAAQqB,EAASpB,UAAY,GAI1CL,EAAcwD,EAGhB,IAAIE,EAAWnB,EAAOe,UACtBf,EAAOe,UAAYtD,EAEf0D,EAASzD,WAAasC,EAAOe,UAAUrD,WACzCsC,EAAOgB,qBAQf9C,EAAKtE,iBAAiB,cAAc,SAAUqG,GAC5C,IAAKD,EAAOa,WAAY,CACtB,IAAIP,EAAON,EAAOO,SAASN,EAAEC,eAE7BF,EAAO3E,cAAc,aAAc,CACjCvE,QAASmJ,EAAEC,cACXI,KAAMA,EACNhB,OAAQU,EAAOQ,UAAUF,SAI/BpC,EAAKtE,iBAAiB,cAAc,SAAUqG,GAC5C,IAAIK,EAAON,EAAOO,SAASN,EAAEC,eAE7BF,EAAO3E,cAAc,cAAe,CAClCvE,QAASmJ,EAAEC,cACXI,KAAMA,EACNhB,OAAQU,EAAOQ,UAAUF,WAK3BtK,KAAKe,QAAQ4B,sBAEf5C,OAAO6D,iBAAiB,WAAW,SAAUqG,GAC3C,GAAID,EAAOa,WAAY,CACrBb,EAAOa,YAAa,EAEpBb,EAAOgB,gBAEP,IAAI9I,EAAU8H,EAAOc,YAAcd,EAAOe,UAAYf,EAAOc,YAAcd,EAAOe,UAC9E5I,EAAU6H,EAAOe,UAAYf,EAAOc,YAAcd,EAAOe,UAAYf,EAAOc,YAEhFd,EAAO3E,cAAc,cAAe,CAClCyD,UAAW5G,EACX6G,QAAS5G,EACTmH,OAAQU,EAAOoB,iBAAiBlJ,EAAS,IAAIF,KAAKG,EAAQF,cAAeE,EAAQ+I,WAAY/I,EAAQ2F,UAAY,UAQrH9H,KAAKqL,sBACPC,cAActL,KAAKqL,qBACnBrL,KAAKqL,oBAAsB,MAG7BrL,KAAKqL,oBAAsBE,aAAY,WACrC,GAA8C,MAA1CvB,EAAOlJ,QAAQM,cAAc,UAAjC,CAIA,IAAIoK,EAAexB,EAAOlJ,QAAQ2K,YAC9BC,EAAY1B,EAAOlJ,QAAQM,cAAc,UAAUqK,YAAc,GACrEzB,EAAOrD,QAAU,KAGfqD,EAAOrD,QADO,EAAZ+E,EAAgBF,EACD,EACI,EAAZE,EAAgBF,EACR,EACI,EAAZE,EAAgBF,EACR,EACI,EAAZE,EAAgBF,EACR,EAEA,GAGnBxB,EAAOlJ,QAAQ6H,iBAAiB,oBAAoB/I,SAAQ,SAAUgJ,GAC/DA,EAAMvH,UAAUZ,SAAS,SAASmG,OAAOoD,EAAOrD,YACnD,CAAC,UAAW,UAAW,UAAW,UAAW,YAAY/G,SAAQ,SAAU+L,GACzE/C,EAAMvH,UAAUuK,OAAOD,MAEzB/C,EAAMvH,UAAUC,IAAI,SAASsF,OAAOoD,EAAOrD,iBAG9C,OAEJ,CACD3I,IAAK,gBACLN,MAAO,WACL,IAAImO,EAAS7L,KAYb,GAVAA,KAAKc,QAAQ6H,iBAAiB,gBAAgB/I,SAAQ,SAAUqJ,GAC9D,OAAOA,EAAI5H,UAAUuK,OAAO,YAE9B5L,KAAKc,QAAQ6H,iBAAiB,sBAAsB/I,SAAQ,SAAUqJ,GACpE,OAAOA,EAAI5H,UAAUuK,OAAO,kBAE9B5L,KAAKc,QAAQ6H,iBAAiB,oBAAoB/I,SAAQ,SAAUqJ,GAClE,OAAOA,EAAI5H,UAAUuK,OAAO,gBAG1B5L,KAAK6K,WAAY,CACnB,IAAI3I,EAAUlC,KAAK8K,YAAc9K,KAAK+K,UAAY/K,KAAK8K,YAAc9K,KAAK+K,UACtE5I,EAAUnC,KAAK+K,UAAY/K,KAAK8K,YAAc9K,KAAK+K,UAAY/K,KAAK8K,YACxE9K,KAAKc,QAAQ6H,iBAAiB,oBAAoB/I,SAAQ,SAAUgJ,GAClE,IAAIlC,EAAU3E,SAAS6G,EAAMnC,QAAQC,SAEjCxE,EAAQgJ,YAAcxE,GAAWvE,EAAQ+I,YAAcxE,GACzDkC,EAAMD,iBAAiB,8BAA8B/I,SAAQ,SAAUqJ,GACrE,IAAIqB,EAAOuB,EAAOtB,SAAStB,GAEvBqB,GAAQpI,GAAWoI,GAAQnI,IAC7B8G,EAAI5H,UAAUC,IAAI,SAEdgJ,EAAK5C,WAAaxF,EAAQwF,WAC5BuB,EAAI5H,UAAUC,IAAI,eAGhBgJ,EAAK5C,WAAavF,EAAQuF,WAC5BuB,EAAI5H,UAAUC,IAAI,uBAQ/B,CACDtD,IAAK,sBACLN,MAAO,SAA6BoD,GAClC,IAAIgL,EAAM,EACNC,EAAO,EAEX,GACED,GAAOhL,EAAQkL,WAAa,EAC5BD,GAAQjL,EAAQmL,YAAc,EAC9BnL,EAAUA,EAAQoL,mBACXpL,GAET,MAAO,CACLgL,IAAKA,EACLC,KAAMA,KAGT,CACD/N,IAAK,mBACLN,MAAO,SAA0B2L,GAC/B,IAAI8C,EAAc5L,SAASa,cAAc,0BAEzC,GAAoB,OAAhB+K,EAGF,IAFAA,EAAYjJ,MAAMgC,QAAU,OAErBiH,EAAY1H,YACjB0H,EAAYzH,YAAYyH,EAAY1H,iBAGtC0H,EAAc5L,SAASiF,cAAc,QACzBnE,UAAUC,IAAI,yBAC1Bf,SAAS6L,KAAKvG,YAAYsG,GAO5B,IAJA,IAAI7B,EAAOtK,KAAKuK,SAASlB,GAErBC,EAAStJ,KAAKwK,UAAUF,GAEnB7N,EAAI,EAAGA,EAAI6M,EAAOjK,OAAQ5C,IAAK,CACtC,IAAI4P,EAAY9L,SAASiF,cAAc,OACvC6G,EAAUhL,UAAUC,IAAI,QACxB+K,EAAUnJ,MAAMoJ,WAAa,aAAa1F,OAAO0C,EAAO7M,GAAG6H,OAC3D,IAAIiI,EAAmBhM,SAASiF,cAAc,OAC9C+G,EAAiBlL,UAAUC,IAAI,WAC/B,IAAIkL,EAAOjM,SAASiF,cAAc,QAClCgH,EAAKnL,UAAUC,IAAI,QACnBkL,EAAKzG,YAAcuD,EAAO7M,GAAGO,KAC7BuP,EAAiB1G,YAAY2G,GAC7B,IAAIC,EAAOlM,SAASiF,cAAc,QAClCiH,EAAKpL,UAAUC,IAAI,SACnBmL,EAAK7G,UAAY,WACjB2G,EAAiB1G,YAAY4G,GAC7BJ,EAAUxG,YAAY0G,GAEtBvM,KAAK0M,wBAAwBL,EAAWrM,KAAKe,QAAQqC,iBAAkBkG,EAAO7M,IAE9E0P,EAAYtG,YAAYwG,GAG1B,GAAIF,EAAYQ,SAAStN,OAAS,EAAG,CACnC,IAAIuN,EAAW5M,KAAK6M,oBAAoBxD,GAExC8C,EAAYjJ,MAAM6I,KAAOa,EAASb,KAAO,GAAK,KAC9CI,EAAYjJ,MAAM4I,IAAMc,EAASd,IAAM,GAAK,KAC5CK,EAAYjJ,MAAMgC,QAAU,QAC5BnF,OAAO6D,iBAAiB,SAAS,SAAUqG,GACpCkC,EAAY1L,SAASwJ,EAAE9K,UAC1BgN,EAAYjJ,MAAMgC,QAAU,UAE7B,CACD4H,MAAM,OAIX,CACD9O,IAAK,0BACLN,MAAO,SAAiC6L,EAAQwD,EAAOC,GACrD,IAAIC,EAAU1M,SAASiF,cAAc,OACrCyH,EAAQ5L,UAAUC,IAAI,WAEtB,IAAK,IAAI7E,EAAI,EAAGA,EAAIsQ,EAAM1N,OAAQ5C,IAChC,IAAyB,IAArBsQ,EAAMtQ,GAAGyQ,UAAiD,mBAArBH,EAAMtQ,GAAGyQ,SAA2BH,EAAMtQ,GAAGyQ,QAAQF,IAA9F,CAIA,IAAIG,EAAW5M,SAASiF,cAAc,OACtC2H,EAAS9L,UAAUC,IAAI,QACvB,IAAI8L,EAAkB7M,SAASiF,cAAc,OAC7C4H,EAAgB/L,UAAUC,IAAI,WAC9B,IAAIkL,EAAOjM,SAASiF,cAAc,QAgBlC,GAfAgH,EAAKnL,UAAUC,IAAI,QACnBkL,EAAKzG,YAAcgH,EAAMtQ,GAAG+P,KAC5BY,EAAgBvH,YAAY2G,GAExBO,EAAMtQ,GAAG4Q,OACX,SAAWC,GACTF,EAAgBxJ,iBAAiB,SAAS,WACxCrD,SAASa,cAAc,0BAA0B8B,MAAMgC,QAAU,OACjE6H,EAAMO,GAAOD,MAAML,MAHvB,CAKGvQ,GAGL0Q,EAAStH,YAAYuH,GAEjBL,EAAMtQ,GAAGsQ,OAASA,EAAMtQ,GAAGsQ,MAAM1N,OAAS,EAAG,CAC/C,IAAIoN,EAAOlM,SAASiF,cAAc,QAClCiH,EAAKpL,UAAUC,IAAI,SACnBmL,EAAK7G,UAAY,WACjBwH,EAAgBvH,YAAY4G,GAE5BzM,KAAK0M,wBAAwBS,EAAUJ,EAAMtQ,GAAGsQ,MAAOC,GAGzDC,EAAQpH,YAAYsH,GAGlBF,EAAQN,SAAStN,OAAS,GAC5BkK,EAAO1D,YAAYoH,KAGtB,CACDjP,IAAK,WACLN,MAAO,SAAkB2L,GACvB,IAAIJ,EAAMI,EAAIjI,cAAc,gBAAgB2E,YACxC6C,EAAQS,EAAIhJ,QAAQ,oBAAoBoG,QAAQC,QAChD6G,EAAOvN,KAAKe,QAAQW,UACxB,OAAO,IAAIM,KAAKuL,EAAM3E,EAAOK,KAE9B,CACDjL,IAAK,gBACLN,MAAO,SAAuB8P,EAAWC,GACvC,IAAIC,EAAQ,KAWZ,IAAK,IAAIjR,IATY,mBAAVkR,MACTD,EAAQ,IAAIC,MAAMH,IAElBE,EAAQnN,SAASqN,YAAY,UACvBC,UAAUL,GAAW,GAAO,GAGpCE,EAAMI,SAAW9N,KAEHyN,EACZC,EAAMjR,GAAKgR,EAAWhR,GAIxB,OADAuD,KAAKc,QAAQiN,cAAcL,GACpBA,IAER,CACD1P,IAAK,cACLN,MAAO,SAAqB4M,GAC1B,GAA4B,MAAxBtK,KAAKe,QAAQmB,SAAmBoI,EAAOtK,KAAKe,QAAQmB,SAAmC,MAAxBlC,KAAKe,QAAQoB,SAAmBmI,EAAOtK,KAAKe,QAAQoB,QACrH,OAAO,EAGT,GAAInC,KAAKe,QAAQ+B,iBAAiBzD,OAAS,EACzC,IAAK,IAAItC,EAAI,EAAGA,EAAIiD,KAAKe,QAAQ+B,iBAAiBzD,OAAQtC,IACxD,GAAIuN,EAAK1C,UAAY5H,KAAKe,QAAQ+B,iBAAiB/F,GACjD,OAAO,EAKb,GAAIiD,KAAKe,QAAQ6B,aAAavD,OAAS,EACrC,IAAStC,EAAI,EAAGA,EAAIiD,KAAKe,QAAQ6B,aAAavD,OAAQtC,IACpD,GAAIuN,EAAK5C,WAAa1H,KAAKe,QAAQ6B,aAAa7F,GAAG2K,UACjD,OAAO,EAKb,OAAO,IAER,CACD1J,IAAK,YACLN,MAAO,SAAmBuL,GACxB,GAAIjJ,KAAKe,QAAQgC,eAAe1D,OAAS,EACvC,IAAK,IAAItC,EAAI,EAAGA,EAAIiD,KAAKe,QAAQgC,eAAe1D,OAAQtC,IACtD,GAAIkM,GAAOjJ,KAAKe,QAAQgC,eAAehG,GACrC,OAAO,EAKb,OAAO,IAQR,CACDiB,IAAK,gBACLN,MAAO,SAAuB4M,GAE5B,IAAI0D,EAAc,IAAIhM,KAAKsI,EAAK5C,WAChCsG,EAAYC,SAAS,EAAG,EAAG,EAAG,GAE9BD,EAAYnG,QAAQmG,EAAYlG,UAAY,GAAKkG,EAAYpG,SAAW,GAAK,GAE7E,IAAIsG,EAAQ,IAAIlM,KAAKgM,EAAY/L,cAAe,EAAG,GAEnD,OAAO,EAAIkM,KAAKC,QAAQJ,EAAYtG,UAAYwG,EAAMxG,WAAa,MAAW,GAAKwG,EAAMtG,SAAW,GAAK,GAAK,KAQ/G,CACD5J,IAAK,YACLN,MAAO,SAAmB4M,GACxB,OAAOtK,KAAKoL,iBAAiBd,EAAM,IAAItI,KAAKsI,EAAKrI,cAAeqI,EAAKY,WAAYZ,EAAKxC,UAAY,MASnG,CACD9J,IAAK,mBACLN,MAAO,SAA0BoL,EAAWC,GAC1C,IAAIO,EAAS,GAEb,GAAItJ,KAAKyD,aAAeqF,GAAaC,EACnC,IAAK,IAAItM,EAAI,EAAGA,EAAIuD,KAAKyD,YAAYpE,OAAQ5C,IACvCuD,KAAKyD,YAAYhH,GAAGqM,UAAYC,GAAW/I,KAAKyD,YAAYhH,GAAGsM,SAAWD,GAC5EQ,EAAON,KAAKhJ,KAAKyD,YAAYhH,IAKnC,OAAO6M,IAWR,CACDtL,IAAK,kBACLN,MAAO,SAAyB4M,GAC9B,IAAI+D,EAASrO,KAETsO,EAAQtN,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC5EsI,EAAStJ,KAAKwK,UAAUF,GAE5B,OAAc,IAAVgE,GACMhF,EAAOiF,MAAK,SAAUvB,GAC5B,OAAQqB,EAAOtN,QAAQ2B,gBAAkBsK,EAAIjD,YAAciD,EAAIjE,QAAUuB,MAExD,IAAVgE,GACDhF,EAAOiF,MAAK,SAAUvB,GAC5B,OAAQqB,EAAOtN,QAAQ2B,gBAAkBsK,EAAIpD,cAAgBoD,EAAIlE,UAAYwB,KAGxEtK,KAAK4K,gBAAgBN,GAAM,IAAUtK,KAAK4K,gBAAgBN,GAAM,KAO1E,CACDtM,IAAK,UACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQW,YAQrB,CACD1D,IAAK,UACLN,MAAO,SAAiB6P,GACtB,IAAIiB,EAASxO,KAETyO,EAAa1M,SAASwL,GAE1B,IAAKzL,MAAM2M,GAAa,CAGtB,IAFAzO,KAAKe,QAAQW,UAAY+M,EAElBzO,KAAKc,QAAQ2D,YAClBzE,KAAKc,QAAQ4D,YAAY1E,KAAKc,QAAQ2D,YAGpCzE,KAAKe,QAAQ0B,eACfzC,KAAK2E,gBAGP,IAAI+J,EAAc1O,KAAKqF,cAAc,cAAe,CAClDC,YAAatF,KAAKe,QAAQW,UAC1BiN,kBAAkB,IAGmB,mBAA5B3O,KAAKe,QAAQkC,YACtBjD,KAAK4O,QAAO,GAEZ5O,KAAK6O,kBAAiB,SAAU5L,GAC9BuL,EAAO/K,YAAcR,EAErBuL,EAAO9K,8BAEP8K,EAAOI,QAAO,OAGXF,EAAYC,kBACf3O,KAAK4O,YASZ,CACD5Q,IAAK,aACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQmB,UAWrB,CACDlE,IAAK,aACLN,MAAO,SAAoB4M,GACzB,IAAIqE,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,IAElFsJ,aAAgBtI,MAAiB,OAATsI,KAC1BtK,KAAKe,QAAQmB,QAAUoI,EAElBqE,GACH3O,KAAK4O,YAQV,CACD5Q,IAAK,aACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQoB,UAWrB,CACDnE,IAAK,aACLN,MAAO,SAAoB4M,GACzB,IAAIqE,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,IAElFsJ,aAAgBtI,MAAiB,OAATsI,KAC1BtK,KAAKe,QAAQoB,QAAUmI,EAElBqE,GACH3O,KAAK4O,YAQV,CACD5Q,IAAK,WACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQmC,QAWrB,CACDlF,IAAK,WACLN,MAAO,SAAkBwF,GACvB,IAAIyL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQmC,MAAiB,cAATA,GAAkC,UAATA,GAA8B,UAATA,EAAoBA,EAAQ,SAE1FyL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,kBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQuB,eAQrB,CACDtE,IAAK,kBACLN,MAAO,SAAyB4E,GAC9BtC,KAAKe,QAAQuB,aAAeA,IAM7B,CACDtE,IAAK,uBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQwB,oBAWrB,CACDvE,IAAK,uBACLN,MAAO,SAA8B6E,GACnC,IAAIoM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQwB,kBAAoBA,EAE5BoM,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,mBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQ0B,gBAWrB,CACDzE,IAAK,mBACLN,MAAO,SAA0B+E,GAC/B,IAAIkM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQ0B,cAAgBA,EAExBkM,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,+BACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQyB,4BAWrB,CACDxE,IAAK,+BACLN,MAAO,SAAsC8E,GAC3C,IAAImM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQyB,0BAA4BA,EAEpCmM,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,mBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQ2B,gBAWrB,CACD1E,IAAK,mBACLN,MAAO,SAA0BgF,GAC/B,IAAIiM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQ2B,cAAgBA,EAExBiM,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,0BACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQ4B,uBAWrB,CACD3E,IAAK,0BACLN,MAAO,SAAiCiF,GACtC,IAAIgM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQ4B,qBAAuBA,EAE/BgM,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,kBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQ6B,eAWrB,CACD5E,IAAK,kBACLN,MAAO,SAAyBkF,GAC9B,IAAI+L,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQ6B,aAAeA,aAAwBC,MAAQD,EAAe,GAEtE+L,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,sBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQ+B,mBAWrB,CACD9E,IAAK,sBACLN,MAAO,SAA6BoF,GAClC,IAAI6L,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQ+B,iBAAmBA,aAA4BD,MAAQC,EAAmB,GAElF6L,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,oBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQgC,iBAWrB,CACD/E,IAAK,oBACLN,MAAO,SAA2BqF,GAChC,IAAI4L,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQgC,eAAiBA,aAA0BF,MAAQE,EAAiB,GAE5E4L,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,sBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQiC,mBAWrB,CACDhF,IAAK,sBACLN,MAAO,SAA6BsF,GAClC,IAAI2L,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQiC,iBAAmBA,EAE3B2L,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,uBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQoC,oBAWrB,CACDnF,IAAK,uBACLN,MAAO,SAA8ByF,GACnC,IAAIwL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQoC,kBAAoBA,EAE5BwL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,sBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQqC,mBAWrB,CACDpF,IAAK,sBACLN,MAAO,SAA6B0F,GAClC,IAAIuL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQqC,iBAAmBA,aAA4BP,MAAQO,EAAmB,GAElFuL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,uBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQsC,oBAWrB,CACDrF,IAAK,uBACLN,MAAO,SAA8B2F,GACnC,IAAIsL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQsC,kBAAiD,mBAAtBA,EAAmCA,EAAoB,KAE1FsL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,8BACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQuC,2BAWrB,CACDtF,IAAK,8BACLN,MAAO,SAAqC4F,GAC1C,IAAIqL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQuC,yBAA+D,mBAA7BA,EAA0CA,EAA2B,KAE/GqL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,cACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQqB,WAWrB,CACDpE,IAAK,cACLN,MAAO,SAAqB0E,GAC1B,IAAIuM,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GAEtE,MAAZoB,GAAkD,MAA9BvB,EAASwB,QAAQD,KACvCpC,KAAKe,QAAQqB,SAAWA,EAEnBuM,GACH3O,KAAK4O,YAQV,CACD5Q,IAAK,gBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQkC,aAWrB,CACDjF,IAAK,gBACLN,MAAO,SAAuBuF,GAC5B,IAAI6L,EAAS9O,KAET2O,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQkC,WAAaA,aAAsBJ,OAA+B,mBAAfI,EAA4BA,EAAa,GAElE,mBAA5BjD,KAAKe,QAAQkC,YACtBjD,KAAK4O,QAAO,GAEZ5O,KAAK6O,kBAAiB,SAAU5L,GAC9B6L,EAAOrL,YAAcR,EAErB6L,EAAOpL,8BAEPoL,EAAOF,QAAO,QAGhB5O,KAAKyD,YAAczD,KAAKe,QAAQkC,WAEhCjD,KAAK0D,8BAEAiL,GACH3O,KAAK4O,YAQV,CACD5Q,IAAK,eACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQwC,UAAYvD,KAAKe,QAAQwC,UAAY1C,EAASwB,QAAQrC,KAAKe,QAAQqB,UAAUmB,YAWlG,CACDvF,IAAK,eACLN,MAAO,SAAsB6F,GAC3B,IAAIoL,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GACtFhB,KAAKe,QAAQwC,UAAazB,MAAMC,SAASwB,IAAoC,KAAtBxB,SAASwB,GAE3DoL,GACH3O,KAAK4O,WAOR,CACD5Q,IAAK,qBACLN,MAAO,WACL,OAAOsC,KAAKe,QAAQyC,kBAQrB,CACDxF,IAAK,qBACLN,MAAO,SAA4B8F,GACjCxD,KAAKe,QAAQyC,gBAA6C,iBAApBA,GAAgCA,aAA2BtC,YAAcsC,EAAkB,OAYlI,CACDxF,IAAK,WACLN,MAAO,SAAkBsP,GACvB,IAAI2B,EAAmB3N,UAAU3B,OAAS,QAAsB4B,IAAjBD,UAAU,IAAmBA,UAAU,GAEtFhB,KAAKyD,YAAYuF,KAAKgE,GAEjB2B,GACH3O,KAAK4O,cAv3DiE1P,EAAkBF,EAAYX,UAAWsD,GAAiBC,GAAa1C,EAAkBF,EAAa4C,GA43D3Kf,EAj0DT,GAo0DApC,EAASiB,QAAUmB,EAEnBpB,EAAgBoB,EAAU,UAAW,CACnCkO,GAAI,CACFC,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACzEC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtD1H,QAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAC9CvC,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHkK,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3F7H,UAAW,IACX9D,UAAW,KAIf9D,EAAgBoB,EAAU,SAAU,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,YAEpB,YAAjD,oBAAXd,OAAyB,YAAcrB,EAAQqB,WACzDA,OAAOc,SAAWA,EAClBN,SAASqD,iBAAiB,oBAAoB,WAC5CrD,SAASoI,iBAAiB,6BAA6B/I,SAAQ,SAAUkB,GACvE,OAAO,IAAID,EAASC,YA36DG,gC,cCM/BD,SAASwB,QAAY,GAAI,CACxB2M,KAAM,CAAC,WAAY,QAAS,QAAS,WAAY,QAAS,WAAY,UACtEC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtD1H,QAAS,CAAC,IAAK,IAAK,KAAM,KAAM,IAAK,IAAK,KAC1CvC,OAAQ,CAAC,UAAW,UAAW,OAAQ,QAAS,MAAO,OAAQ,UAAW,OAAQ,YAAa,UAAW,WAAY,YACtHkK,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3F7H,UAAU,IACV9D,UAAW,I,6DCTZ,MAAM4L,EAAoB,CACxB,KAAM,EACN,GAAM,GACN,GAAM,EACN,GAAM,GACN,GAAM,GACN,GAAM,EACN,GAAM,GACN,GAAM,EACN,GAAM,EACN,GAAM,EACN,GAAM,GACN,GAAM,EACN,GAAM,GAIFC,EAAU,GAIhB,IAAIC,EAEG,SAASC,EAAcC,GAC5BF,EAAaE,EA0Cf,SAASC,EAASC,GAChBC,QAAQC,IAAI,kBAAmBF,GAG1B,SAASG,EAAeC,EAAmBC,GAChD,MAAMC,EAAiC,QAAdD,EACnBhC,EAAW,IAAI,IAASvN,SAASyP,eAAe,YAAa,CACjE9N,QAAS,IAAIF,KAAK,KAAM,EAAG,GAC3BG,QAAS,IAAIH,KAAK,IAAIA,KAAK,KAAM,EAAG,GAAG0F,UAAY,GACnDhG,UAAW,KACXU,SAAU,KACVc,MAAO,aACPT,eAAe,EACfoB,UAAYoG,IAEV,MAAMgG,EAA6B1P,SAASa,cAC1C,qBAEF6O,EAAc/M,MAAMgC,QAAU,OAC9B+K,EAAc/M,MAAMgN,SAAW,OAC/BD,EAAc/M,MAAMiN,eAAiB,eACrCF,EAAc/M,MAAMkN,aAAe,gBAErC5M,qBAAiBvC,EACjBoC,kBAAmB,CAAC+E,EAA0BX,KACpB2H,EAAQiB,OAC9BC,GAAUA,EAAOC,MAAQlB,GAEXzP,QAAQ0Q,IAEpBA,EAAOxH,UAAUpB,WAAaD,GAC9BA,GAAe6I,EAAOvH,QAAQrB,YAG9BU,EAAYlF,MAAMsN,eAAiB,uBAKzCvM,WAAagG,IACX,GAAIA,EAAEX,OAAOjK,OAAS,EAAG,CACvB,IAAIoR,EAAU,GACd,IAAIC,EAAY,GAChB,MAAMjJ,EAAc,IAAIzF,KAAKiI,EAAEK,MAAM5C,UACrCgJ,GAAa,GACb,MAAMC,EAAkBvB,EAAQiB,OAC9BC,GAAUA,EAAOC,MAAQlB,GAa3B,IAAK,IAAI5S,KAXTkU,EAAgB/Q,QAAQ0Q,IAEpBA,EAAOxH,UAAUpB,WAAaD,GAC9BA,GAAe6I,EAAOvH,QAAQrB,YAE9BgJ,GACE,yCACAJ,EAAO5C,MACP,YAGQzD,EAAEX,OACdmH,GACE,sCACAC,EACA,4BACAzG,EAAEX,OAAO7M,GAAGiB,MACZ,iBAEJkT,EAAE3G,EAAEnJ,SAAS+P,QAAQ,CACnBC,UAAW,MACXC,QAAS,SACT1I,UAAW,YACX2I,MAAM,EACNP,QAASA,IAEXG,EAAE3G,EAAEnJ,SAAS+P,QAAQ,UAGzB3M,YAAc+F,IACRA,EAAEX,OAAOjK,OAAS,GACpBuR,EAAE3G,EAAEnJ,SAAS+P,QAAQ,WAIrBI,EAAa,GACbC,EAAiBC,IACrB,MAAMC,EAAUD,EAAQE,MAAM,KAC9B,OAAO,IAAIrP,KACTsP,OAAOF,EAAQ,IACfE,OAAOF,EAAQ,IAAM,EACrBE,OAAOF,EAAQ,MAOnB,SAASG,EAAkBC,GACzB,MAAO,OACLA,EAAU9T,MAAQ,EAAI,EAAI,YAN9B,SAAkC+T,EAAeC,GAC/C,MAAMC,EAAOxD,KAAKyD,IAAI,EAAGzD,KAAK0D,IAAIJ,GAASC,GAC3C,OAAO,IAAMvD,KAAK2D,MAAa,GAAPH,GAAa,IAK5BI,CACPP,EAAU9T,MACqB,IAA/ByR,EAAkBU,OAyCtB,IAAImC,EAAa,IAAIC,eACrBD,EAAWE,OA1BX,WACE,MAAMC,EAAUnS,KAAKoS,aAAaf,MAAM,MACxC,IAAK,IAAI5U,EAAI,EAAGA,EAAI0V,EAAQ9S,OAAQ5C,IAClC,GAAI0V,EAAQ1V,GAAG4C,OAAS,EAAG,CACzB,MAAMgT,EAASF,EAAQ1V,GAAG4U,MAAM,KAChCJ,EAAWjI,KAAK,CACdsJ,GAAI7V,EACJqM,UAAWoI,EAAcmB,EAAO,IAChCtJ,QAASmI,EAAcmB,EAAO,IAC9B3U,MAAO4T,OAAOe,EAAOtC,EAAmB,EAAI,MAIlD,IAAIwC,EAAS,EACbtB,EAAWrR,QACT4R,GAAce,EAASpE,KAAKqE,IAAID,EAAQf,EAAU9T,QAEpDuT,EAAWrR,QACT4R,GACGA,EAAUlN,MAAQyL,EACfwB,EAAkBC,GAjC5B,SACEA,EAGAE,GAEA,MAAMC,EAAkE,IAA3DxD,KAAKyD,IAAI,EAAIzD,KAAK0D,IAAIL,EAAU9T,OAASgU,EAAU,KAChE,OAAIC,EAAO,GAAW,UAClBA,EAAO,GAAW,UAClBA,EAAO,GAAW,UAClBA,EAAO,GAAW,UAClBA,EAAO,IAAY,eAAvB,EAuBQc,CAAqBjB,EAAWe,IAExCzE,EAAS4E,cAAczB,IAIzBe,EAAWW,QAAUnD,EACrBwC,EAAWY,KACT,MACA,qCAAqC/C,SACrC,GAEFmC,EAAWa,OCnNb,IAAIC,EAAmC,MAEvC,SAASC,EAAuBlD,EAAmBC,GAGjDR,EAAcO,GACdD,EAAeC,EAAWC,IDerB,SACLT,EACAyD,GAEA,MA6BME,EAAc,IAAIf,eACxBe,EAAYd,OA9BU,KACpB,MAAMe,EAAgB9B,IACpB,MAAMC,EAAUD,EAAQE,MAAM,KAC9B,OAAO,IAAIrP,KACTsP,OAAOF,EAAQ,IACfE,OAAOF,EAAQ,IAAM,EACrBE,OAAOF,EAAQ,MAIbe,EAAUa,EAAYZ,aAAaf,MAAM,MAE/C,IAAK,IAAI5U,EAAI,EAAGA,EAAI0V,EAAQ9S,OAAQ5C,IAClC,GAAI0V,EAAQ1V,GAAG4C,OAAS,EAAG,CACzB,MAAMgT,EAASF,EAAQ1V,GAAG4U,MAAM,KAC5BgB,GACFjD,EAAQpG,KAAK,CACXuH,IAAK8B,EAAO,GACZvJ,UAAWmK,EAAaZ,EAAO,IAC/BtJ,QAASkK,EAAaZ,EAAO,IAC7B3E,MAAO2E,EAAO,KAMtB/C,EAAcD,GACdO,EAAeP,EAAYyD,IAI7BE,EAAYL,QAAUnD,EACtBwD,EAAYJ,KAAK,MAAO,sCAAsC,GAC9DI,EAAYH,OCjDdK,CAXmB,KAWcJ,GAEjC,MAAMK,EAAmC5S,SAASa,cAAc,gBAChE+R,EAAcvP,iBAAiB,SAAU8J,IAEvCqF,EADqBrF,EAAMvO,OAAezB,MACNoV,KAGMvS,SAASa,cAAc,QAClDwC,iBAAiB,QAASwP,IACzCN,EAAmB,MACnBC,EAAuBI,EAAczV,MAAOoV,KAGFvS,SAASa,cAAc,QAClDwC,iBAAiB,QAASwP,IACzCN,EAAmB,MACnBC,EAAuBI,EAAczV,MAAOoV","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports);\n    global.jsYearCalendar = mod.exports;\n  }\n})(this, function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = void 0;\n\n  function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  /* =========================================================\r\n   * JS year calendar v1.0.0\r\n   * Repo: https://github.com/year-calendar/js-year-calendar\r\n   * =========================================================\r\n   * Created by Paul David-Sivelle\r\n   *\r\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   * you may not use this file except in compliance with the License.\r\n   * You may obtain a copy of the License at\r\n   *\r\n   * http://www.apache.org/licenses/LICENSE-2.0\r\n   *\r\n   * Unless required by applicable law or agreed to in writing, software\r\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   * See the License for the specific language governing permissions and\r\n   * limitations under the License.\r\n   * ========================================================= */\n  // NodeList forEach() polyfill\n  if (typeof NodeList !== \"undefined\" && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = function (callback, thisArg) {\n      thisArg = thisArg || window;\n\n      for (var i = 0; i < this.length; i++) {\n        callback.call(thisArg, this[i], i, this);\n      }\n    };\n  } // Element closest() polyfill\n\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.matches) {\n    var prototype = Element.prototype;\n    Element.prototype.matches = prototype.msMatchesSelector || prototype.webkitMatchesSelector;\n  }\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n      var el = this;\n      if (!document.documentElement.contains(el)) return null;\n\n      do {\n        if (el.matches(s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType == 1);\n\n      return null;\n    };\n  }\n  /**\r\n   * Calendar instance.\r\n   */\n\n\n  var Calendar =\n  /*#__PURE__*/\n  function () {\n    /**\r\n     * Fired when a day is clicked.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\r\n     *   console.log(\"Click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when a day is right clicked.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\r\n     *   console.log(\"Right click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the mouse enter in a day.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('mouseOnDay', function(e) {\r\n     *   console.log(\"Mouse enter in a day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the mouse leave a day.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('mouseOutDay', function(e) {\r\n     *   console.log(\"Mouse leave a day: \" + e.date + \" (\" + e.events.length + \" events)\");\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when the calendar rendering is ended.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('renderEnd', function(e) {\r\n     *   console.log(\"Render end for year: \" + e.currentYear);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Fired when a date range is selected.\r\n     * \r\n     * Don't forget to enable the `enableRangeSelection` option to be able to use the range selection functionality.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('selectRange', function(e) {\r\n     *   console.log(\"Select the range: \" + e.startDate + \" - \" + e.endDate);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Triggered after the changing the current year.\r\n     * @event\r\n     * @example\r\n     * ```\r\n     * \r\n     * document.querySelector('.calendar').addEventListener('yearChanged', function(e) {\r\n     *   console.log(\"New year selected: \" + e.currentYear);\r\n     * })\r\n     * ```\r\n     */\n\n    /**\r\n     * Create a new calendar.\r\n     * @param element The element (or the selector to an element) in which the calendar should be created.\r\n     * @param options [Optional] The options used to customize the calendar\r\n     */\n    function Calendar(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Calendar);\n\n      _defineProperty(this, \"element\", void 0);\n\n      _defineProperty(this, \"options\", void 0);\n\n      _defineProperty(this, \"_dataSource\", void 0);\n\n      _defineProperty(this, \"_mouseDown\", void 0);\n\n      _defineProperty(this, \"_rangeStart\", void 0);\n\n      _defineProperty(this, \"_rangeEnd\", void 0);\n\n      _defineProperty(this, \"_responsiveInterval\", void 0);\n\n      _defineProperty(this, \"_nbCols\", void 0);\n\n      _defineProperty(this, \"clickDay\", void 0);\n\n      _defineProperty(this, \"dayContextMenu\", void 0);\n\n      _defineProperty(this, \"mouseOnDay\", void 0);\n\n      _defineProperty(this, \"mouseOutDay\", void 0);\n\n      _defineProperty(this, \"renderEnd\", void 0);\n\n      _defineProperty(this, \"selectRange\", void 0);\n\n      _defineProperty(this, \"yearChanged\", void 0);\n\n      if (element instanceof HTMLElement) {\n        this.element = element;\n      } else if (typeof element === \"string\") {\n        this.element = document.querySelector(element);\n      } else {\n        throw new Error(\"The element parameter should be a DOM node or a selector\");\n      }\n\n      this.element.classList.add('calendar');\n\n      this._initializeEvents(options);\n\n      this._initializeOptions(options);\n\n      this.setYear(this.options.startYear);\n    }\n\n    _createClass(Calendar, [{\n      key: \"_initializeOptions\",\n      value: function _initializeOptions(opt) {\n        if (opt == null) {\n          opt = {};\n        }\n\n        this.options = {\n          startYear: !isNaN(parseInt(opt.startYear)) ? parseInt(opt.startYear) : new Date().getFullYear(),\n          minDate: opt.minDate instanceof Date ? opt.minDate : null,\n          maxDate: opt.maxDate instanceof Date ? opt.maxDate : null,\n          language: opt.language != null && Calendar.locales[opt.language] != null ? opt.language : 'en',\n          allowOverlap: opt.allowOverlap != null ? opt.allowOverlap : true,\n          displayWeekNumber: opt.displayWeekNumber != null ? opt.displayWeekNumber : false,\n          displayDisabledDataSource: opt.displayDisabledDataSource != null ? opt.displayDisabledDataSource : false,\n          displayHeader: opt.displayHeader != null ? opt.displayHeader : true,\n          alwaysHalfDay: opt.alwaysHalfDay != null ? opt.alwaysHalfDay : false,\n          enableRangeSelection: opt.enableRangeSelection != null ? opt.enableRangeSelection : false,\n          disabledDays: opt.disabledDays instanceof Array ? opt.disabledDays : [],\n          disabledWeekDays: opt.disabledWeekDays instanceof Array ? opt.disabledWeekDays : [],\n          hiddenWeekDays: opt.hiddenWeekDays instanceof Array ? opt.hiddenWeekDays : [],\n          roundRangeLimits: opt.roundRangeLimits != null ? opt.roundRangeLimits : false,\n          dataSource: opt.dataSource instanceof Array || typeof opt.dataSource === \"function\" ? opt.dataSource : [],\n          style: opt.style == 'background' || opt.style == 'border' || opt.style == 'custom' ? opt.style : 'border',\n          enableContextMenu: opt.enableContextMenu != null ? opt.enableContextMenu : false,\n          contextMenuItems: opt.contextMenuItems instanceof Array ? opt.contextMenuItems : [],\n          customDayRenderer: typeof opt.customDayRenderer === \"function\" ? opt.customDayRenderer : null,\n          customDataSourceRenderer: typeof opt.customDataSourceRenderer === \"function\" ? opt.customDataSourceRenderer : null,\n          weekStart: !isNaN(parseInt(opt.weekStart)) ? parseInt(opt.weekStart) : null,\n          loadingTemplate: typeof opt.loadingTemplate === \"string\" || opt.loadingTemplate instanceof HTMLElement ? opt.loadingTemplate : null\n        };\n\n        if (this.options.dataSource instanceof Array) {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n        }\n      }\n    }, {\n      key: \"_initializeEvents\",\n      value: function _initializeEvents(opt) {\n        if (opt == null) {\n          opt = [];\n        }\n\n        if (opt.yearChanged) {\n          this.element.addEventListener('yearChanged', opt.yearChanged);\n        }\n\n        if (opt.renderEnd) {\n          this.element.addEventListener('renderEnd', opt.renderEnd);\n        }\n\n        if (opt.clickDay) {\n          this.element.addEventListener('clickDay', opt.clickDay);\n        }\n\n        if (opt.dayContextMenu) {\n          this.element.addEventListener('dayContextMenu', opt.dayContextMenu);\n        }\n\n        if (opt.selectRange) {\n          this.element.addEventListener('selectRange', opt.selectRange);\n        }\n\n        if (opt.mouseOnDay) {\n          this.element.addEventListener('mouseOnDay', opt.mouseOnDay);\n        }\n\n        if (opt.mouseOutDay) {\n          this.element.addEventListener('mouseOutDay', opt.mouseOutDay);\n        }\n      }\n    }, {\n      key: \"_fetchDataSource\",\n      value: function _fetchDataSource(callback) {\n        if (typeof this.options.dataSource === \"function\") {\n          var getDataSource = this.options.dataSource;\n\n          if (getDataSource.length == 2) {\n            // 2 parameters, means callback method\n            getDataSource(this.options.startYear, callback);\n          } else {\n            // 1 parameter, means synchronous or promise method\n            var result = getDataSource(this.options.startYear);\n\n            if (result instanceof Array) {\n              callback(result);\n            } else {\n              result.then(callback);\n            }\n          }\n        } else {\n          callback(this.options.dataSource);\n        }\n      }\n    }, {\n      key: \"_initializeDatasourceColors\",\n      value: function _initializeDatasourceColors() {\n        for (var i = 0; i < this._dataSource.length; i++) {\n          if (this._dataSource[i].color == null) {\n            this._dataSource[i].color = Calendar.colors[i % Calendar.colors.length];\n          }\n        }\n      }\n      /**\r\n          * Renders the calendar.\r\n          */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var isLoading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        // Clear the calendar (faster method)\n        while (this.element.firstChild) {\n          this.element.removeChild(this.element.firstChild);\n        }\n\n        if (this.options.displayHeader) {\n          this._renderHeader();\n        }\n\n        if (isLoading) {\n          this._renderLoading();\n        } else {\n          this._renderBody();\n\n          this._renderDataSource();\n\n          this._applyEvents(); // Fade animation\n\n\n          var months = this.element.querySelector('.months-container');\n          months.style.opacity = '0';\n          months.style.display = 'block';\n          months.style.transition = 'opacity 0.5s';\n          setTimeout(function () {\n            months.style.opacity = '1';\n            setTimeout(function () {\n              return months.style.transition = '';\n            }, 500);\n          }, 0);\n\n          this._triggerEvent('renderEnd', {\n            currentYear: this.options.startYear\n          });\n        }\n      }\n    }, {\n      key: \"_renderHeader\",\n      value: function _renderHeader() {\n        var header = document.createElement('div');\n        header.classList.add('calendar-header');\n        var headerTable = document.createElement('table');\n        var prevDiv = document.createElement('th');\n        prevDiv.classList.add('prev');\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevDiv.classList.add('disabled');\n        }\n\n        var prevIcon = document.createElement('span');\n        prevIcon.innerHTML = \"&lsaquo;\";\n        prevDiv.appendChild(prevIcon);\n        headerTable.appendChild(prevDiv);\n        var prev2YearDiv = document.createElement('th');\n        prev2YearDiv.classList.add('year-title');\n        prev2YearDiv.classList.add('year-neighbor2');\n        prev2YearDiv.textContent = (this.options.startYear - 2).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 2, 11, 31)) {\n          prev2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prev2YearDiv);\n        var prevYearDiv = document.createElement('th');\n        prevYearDiv.classList.add('year-title');\n        prevYearDiv.classList.add('year-neighbor');\n        prevYearDiv.textContent = (this.options.startYear - 1).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prevYearDiv);\n        var yearDiv = document.createElement('th');\n        yearDiv.classList.add('year-title');\n        yearDiv.textContent = this.options.startYear.toString();\n        headerTable.appendChild(yearDiv);\n        var nextYearDiv = document.createElement('th');\n        nextYearDiv.classList.add('year-title');\n        nextYearDiv.classList.add('year-neighbor');\n        nextYearDiv.textContent = (this.options.startYear + 1).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(nextYearDiv);\n        var next2YearDiv = document.createElement('th');\n        next2YearDiv.classList.add('year-title');\n        next2YearDiv.classList.add('year-neighbor2');\n        next2YearDiv.textContent = (this.options.startYear + 2).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 2, 0, 1)) {\n          next2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(next2YearDiv);\n        var nextDiv = document.createElement('th');\n        nextDiv.classList.add('next');\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextDiv.classList.add('disabled');\n        }\n\n        var nextIcon = document.createElement('span');\n        nextIcon.innerHTML = \"&rsaquo;\";\n        nextDiv.appendChild(nextIcon);\n        headerTable.appendChild(nextDiv);\n        header.appendChild(headerTable);\n        this.element.appendChild(header);\n      }\n    }, {\n      key: \"_renderBody\",\n      value: function _renderBody() {\n        var monthsDiv = document.createElement('div');\n        monthsDiv.classList.add('months-container');\n\n        for (var m = 0; m < 12; m++) {\n          /* Container */\n          var monthDiv = document.createElement('div');\n          monthDiv.classList.add('month-container');\n          monthDiv.dataset.monthId = m.toString();\n\n          if (this._nbCols) {\n            monthDiv.classList.add(\"month-\".concat(this._nbCols));\n          }\n\n          var firstDate = new Date(this.options.startYear, m, 1);\n          var table = document.createElement('table');\n          table.classList.add('month');\n          /* Month header */\n\n          var thead = document.createElement('thead');\n          var titleRow = document.createElement('tr');\n          var titleCell = document.createElement('th');\n          titleCell.classList.add('month-title');\n          titleCell.setAttribute('colspan', this.options.displayWeekNumber ? '8' : '7');\n          titleCell.textContent = Calendar.locales[this.options.language].months[m];\n          titleRow.appendChild(titleCell);\n          thead.appendChild(titleRow);\n          var headerRow = document.createElement('tr');\n\n          if (this.options.displayWeekNumber) {\n            var weekNumberCell = document.createElement('th');\n            weekNumberCell.classList.add('week-number');\n            weekNumberCell.textContent = Calendar.locales[this.options.language].weekShort;\n            headerRow.appendChild(weekNumberCell);\n          }\n\n          var weekStart = this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n          var d = weekStart;\n\n          do {\n            var headerCell = document.createElement('th');\n            headerCell.classList.add('day-header');\n            headerCell.textContent = Calendar.locales[this.options.language].daysMin[d];\n\n            if (this._isHidden(d)) {\n              headerCell.classList.add('hidden');\n            }\n\n            headerRow.appendChild(headerCell);\n            d++;\n            if (d >= 7) d = 0;\n          } while (d != weekStart);\n\n          thead.appendChild(headerRow);\n          table.appendChild(thead);\n          /* Days */\n\n          var currentDate = new Date(firstDate.getTime());\n          var lastDate = new Date(this.options.startYear, m + 1, 0);\n\n          while (currentDate.getDay() != weekStart) {\n            currentDate.setDate(currentDate.getDate() - 1);\n          }\n\n          while (currentDate <= lastDate) {\n            var row = document.createElement('tr');\n\n            if (this.options.displayWeekNumber) {\n              var weekNumberCell = document.createElement('td');\n              var currentThursday = new Date(currentDate.getTime()); // Week number is computed based on the thursday\n\n              currentThursday.setDate(currentThursday.getDate() - weekStart + 4);\n              weekNumberCell.classList.add('week-number');\n              weekNumberCell.textContent = this.getWeekNumber(currentThursday).toString();\n              row.appendChild(weekNumberCell);\n            }\n\n            do {\n              var cell = document.createElement('td');\n              cell.classList.add('day');\n\n              if (this._isHidden(currentDate.getDay())) {\n                cell.classList.add('hidden');\n              }\n\n              if (currentDate < firstDate) {\n                cell.classList.add('old');\n              } else if (currentDate > lastDate) {\n                cell.classList.add('new');\n              } else {\n                if (this._isDisabled(currentDate)) {\n                  cell.classList.add('disabled');\n                }\n\n                var cellContent = document.createElement('div');\n                cellContent.classList.add('day-content');\n                cellContent.textContent = currentDate.getDate().toString();\n                cell.appendChild(cellContent);\n\n                if (this.options.customDayRenderer) {\n                  this.options.customDayRenderer(cellContent, currentDate);\n                }\n              }\n\n              row.appendChild(cell);\n              currentDate.setDate(currentDate.getDate() + 1);\n            } while (currentDate.getDay() != weekStart);\n\n            table.appendChild(row);\n          }\n\n          monthDiv.appendChild(table);\n          monthsDiv.appendChild(monthDiv);\n        }\n\n        this.element.appendChild(monthsDiv);\n      }\n    }, {\n      key: \"_renderLoading\",\n      value: function _renderLoading() {\n        var container = document.createElement('div');\n        container.classList.add('calendar-loading-container');\n        container.style.minHeight = this._nbCols * 200 + 'px';\n        var loading = document.createElement('div');\n        loading.classList.add('calendar-loading');\n\n        if (this.options.loadingTemplate) {\n          if (typeof this.options.loadingTemplate === \"string\") {\n            loading.innerHTML = this.options.loadingTemplate;\n          } else if (this.options.loadingTemplate instanceof HTMLElement) {\n            loading.appendChild(this.options.loadingTemplate);\n          }\n        } else {\n          var spinner = document.createElement('div');\n          spinner.classList.add('calendar-spinner');\n\n          for (var i = 1; i <= 3; i++) {\n            var bounce = document.createElement('div');\n            bounce.classList.add(\"bounce\".concat(i));\n            spinner.appendChild(bounce);\n          }\n\n          loading.appendChild(spinner);\n        }\n\n        container.appendChild(loading);\n        this.element.appendChild(container);\n      }\n    }, {\n      key: \"_renderDataSource\",\n      value: function _renderDataSource() {\n        var _this = this;\n\n        if (this._dataSource != null && this._dataSource.length > 0) {\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n            var firstDate = new Date(_this.options.startYear, monthId, 1);\n            var lastDate = new Date(_this.options.startYear, monthId + 1, 1);\n\n            if ((_this.options.minDate == null || lastDate > _this.options.minDate) && (_this.options.maxDate == null || firstDate <= _this.options.maxDate)) {\n              var monthData = [];\n\n              for (var i = 0; i < _this._dataSource.length; i++) {\n                if (!(_this._dataSource[i].startDate >= lastDate) || _this._dataSource[i].endDate < firstDate) {\n                  monthData.push(_this._dataSource[i]);\n                }\n              }\n\n              if (monthData.length > 0) {\n                month.querySelectorAll('.day-content').forEach(function (day) {\n                  var currentDate = new Date(_this.options.startYear, monthId, parseInt(day.textContent));\n                  var nextDate = new Date(_this.options.startYear, monthId, currentDate.getDate() + 1);\n                  var dayData = [];\n\n                  if ((_this.options.minDate == null || currentDate >= _this.options.minDate) && (_this.options.maxDate == null || currentDate <= _this.options.maxDate)) {\n                    for (var i = 0; i < monthData.length; i++) {\n                      if (monthData[i].startDate < nextDate && monthData[i].endDate >= currentDate) {\n                        dayData.push(monthData[i]);\n                      }\n                    }\n\n                    if (dayData.length > 0 && (_this.options.displayDisabledDataSource || !_this._isDisabled(currentDate))) {\n                      _this._renderDataSourceDay(day, currentDate, dayData);\n                    }\n                  }\n                });\n              }\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_renderDataSourceDay\",\n      value: function _renderDataSourceDay(elt, currentDate, events) {\n        var parent = elt.parentElement;\n\n        switch (this.options.style) {\n          case 'border':\n            var weight = 0;\n\n            if (events.length == 1) {\n              weight = 4;\n            } else if (events.length <= 3) {\n              weight = 2;\n            } else {\n              parent.style.boxShadow = 'inset 0 -4px 0 0 black';\n            }\n\n            if (weight > 0) {\n              var boxShadow = '';\n\n              for (var i = 0; i < events.length; i++) {\n                if (boxShadow != '') {\n                  boxShadow += \",\";\n                }\n\n                boxShadow += \"inset 0 -\".concat((i + 1) * weight, \"px 0 0 \").concat(events[i].color);\n              }\n\n              parent.style.boxShadow = boxShadow;\n            }\n\n            break;\n\n          case 'background':\n            parent.style.backgroundColor = events[events.length - 1].color;\n            var currentTime = currentDate.getTime();\n\n            if (events[events.length - 1].startDate.getTime() == currentTime) {\n              parent.classList.add('day-start');\n\n              if (events[events.length - 1].startHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].startDate.getTime() != currentTime || !events[i].startHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(-45deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-left');\n              }\n            } else if (events[events.length - 1].endDate.getTime() == currentTime) {\n              parent.classList.add('day-end');\n\n              if (events[events.length - 1].endHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].endDate.getTime() != currentTime || !events[i].endHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(135deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-right');\n              }\n            }\n\n            break;\n\n          case 'custom':\n            if (this.options.customDataSourceRenderer) {\n              this.options.customDataSourceRenderer.call(this, elt, currentDate, events);\n            }\n\n            break;\n        }\n      }\n    }, {\n      key: \"_applyEvents\",\n      value: function _applyEvents() {\n        var _this2 = this;\n\n        if (this.options.displayHeader) {\n          /* Header buttons */\n          this.element.querySelectorAll('.year-neighbor, .year-neighbor2').forEach(function (element) {\n            element.addEventListener('click', function (e) {\n              if (!e.currentTarget.classList.contains('disabled')) {\n                _this2.setYear(parseInt(e.currentTarget.textContent));\n              }\n            });\n          });\n          this.element.querySelector('.calendar-header .prev').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear - 1);\n                }, 50);\n              }, 100);\n            }\n          });\n          this.element.querySelector('.calendar-header .next').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '-100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear + 1);\n                }, 50);\n              }, 100);\n            }\n          });\n        }\n\n        var cells = this.element.querySelectorAll('.day:not(.old):not(.new):not(.disabled)');\n        cells.forEach(function (cell) {\n          /* Click on date */\n          cell.addEventListener('click', function (e) {\n            e.stopPropagation();\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('clickDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Click right on date */\n\n          cell.addEventListener('contextmenu', function (e) {\n            if (_this2.options.enableContextMenu) {\n              e.preventDefault();\n\n              if (_this2.options.contextMenuItems.length > 0) {\n                _this2._openContextMenu(e.currentTarget);\n              }\n            }\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('dayContextMenu', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Range selection */\n\n          if (_this2.options.enableRangeSelection) {\n            cell.addEventListener('mousedown', function (e) {\n              if (e.which == 1) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (_this2.options.allowOverlap || _this2.isThereFreeSlot(currentDate)) {\n                  _this2._mouseDown = true;\n                  _this2._rangeStart = _this2._rangeEnd = currentDate;\n\n                  _this2._refreshRange();\n                }\n              }\n            });\n            cell.addEventListener('mouseenter', function (e) {\n              if (_this2._mouseDown) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (!_this2.options.allowOverlap) {\n                  var newDate = new Date(_this2._rangeStart.getTime());\n\n                  if (newDate < currentDate) {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + 1);\n\n                    while (newDate < currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, false)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() + 1);\n                      nextDate.setDate(nextDate.getDate() + 1);\n                    }\n                  } else {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() - 1);\n\n                    while (newDate > currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, true)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() - 1);\n                      nextDate.setDate(nextDate.getDate() - 1);\n                    }\n                  }\n\n                  currentDate = newDate;\n                }\n\n                var oldValue = _this2._rangeEnd;\n                _this2._rangeEnd = currentDate;\n\n                if (oldValue.getTime() != _this2._rangeEnd.getTime()) {\n                  _this2._refreshRange();\n                }\n              }\n            });\n          }\n          /* Hover date */\n\n\n          cell.addEventListener('mouseenter', function (e) {\n            if (!_this2._mouseDown) {\n              var date = _this2._getDate(e.currentTarget);\n\n              _this2._triggerEvent('mouseOnDay', {\n                element: e.currentTarget,\n                date: date,\n                events: _this2.getEvents(date)\n              });\n            }\n          });\n          cell.addEventListener('mouseleave', function (e) {\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('mouseOutDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n        });\n\n        if (this.options.enableRangeSelection) {\n          // Release range selection\n          window.addEventListener('mouseup', function (e) {\n            if (_this2._mouseDown) {\n              _this2._mouseDown = false;\n\n              _this2._refreshRange();\n\n              var minDate = _this2._rangeStart < _this2._rangeEnd ? _this2._rangeStart : _this2._rangeEnd;\n              var maxDate = _this2._rangeEnd > _this2._rangeStart ? _this2._rangeEnd : _this2._rangeStart;\n\n              _this2._triggerEvent('selectRange', {\n                startDate: minDate,\n                endDate: maxDate,\n                events: _this2.getEventsOnRange(minDate, new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate() + 1))\n              });\n            }\n          });\n        }\n        /* Responsive management */\n\n\n        if (this._responsiveInterval) {\n          clearInterval(this._responsiveInterval);\n          this._responsiveInterval = null;\n        }\n\n        this._responsiveInterval = setInterval(function () {\n          if (_this2.element.querySelector('.month') == null) {\n            return;\n          }\n\n          var calendarSize = _this2.element.offsetWidth;\n          var monthSize = _this2.element.querySelector('.month').offsetWidth + 10;\n          _this2._nbCols = null;\n\n          if (monthSize * 6 < calendarSize) {\n            _this2._nbCols = 2;\n          } else if (monthSize * 4 < calendarSize) {\n            _this2._nbCols = 3;\n          } else if (monthSize * 3 < calendarSize) {\n            _this2._nbCols = 4;\n          } else if (monthSize * 2 < calendarSize) {\n            _this2._nbCols = 6;\n          } else {\n            _this2._nbCols = 12;\n          }\n\n          _this2.element.querySelectorAll('.month-container').forEach(function (month) {\n            if (!month.classList.contains(\"month-\".concat(_this2._nbCols))) {\n              ['month-2', 'month-3', 'month-4', 'month-6', 'month-12'].forEach(function (className) {\n                month.classList.remove(className);\n              });\n              month.classList.add(\"month-\".concat(_this2._nbCols));\n            }\n          });\n        }, 300);\n      }\n    }, {\n      key: \"_refreshRange\",\n      value: function _refreshRange() {\n        var _this3 = this;\n\n        this.element.querySelectorAll('td.day.range').forEach(function (day) {\n          return day.classList.remove('range');\n        });\n        this.element.querySelectorAll('td.day.range-start').forEach(function (day) {\n          return day.classList.remove('range-start');\n        });\n        this.element.querySelectorAll('td.day.range-end').forEach(function (day) {\n          return day.classList.remove('range-end');\n        });\n\n        if (this._mouseDown) {\n          var minDate = this._rangeStart < this._rangeEnd ? this._rangeStart : this._rangeEnd;\n          var maxDate = this._rangeEnd > this._rangeStart ? this._rangeEnd : this._rangeStart;\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n\n            if (minDate.getMonth() <= monthId && maxDate.getMonth() >= monthId) {\n              month.querySelectorAll('td.day:not(.old):not(.new)').forEach(function (day) {\n                var date = _this3._getDate(day);\n\n                if (date >= minDate && date <= maxDate) {\n                  day.classList.add('range');\n\n                  if (date.getTime() == minDate.getTime()) {\n                    day.classList.add('range-start');\n                  }\n\n                  if (date.getTime() == maxDate.getTime()) {\n                    day.classList.add('range-end');\n                  }\n                }\n              });\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_getElementPosition\",\n      value: function _getElementPosition(element) {\n        var top = 0,\n            left = 0;\n\n        do {\n          top += element.offsetTop || 0;\n          left += element.offsetLeft || 0;\n          element = element.offsetParent;\n        } while (element);\n\n        return {\n          top: top,\n          left: left\n        };\n      }\n    }, {\n      key: \"_openContextMenu\",\n      value: function _openContextMenu(elt) {\n        var contextMenu = document.querySelector('.calendar-context-menu');\n\n        if (contextMenu !== null) {\n          contextMenu.style.display = 'none'; // Clear the context menu (faster method)\n\n          while (contextMenu.firstChild) {\n            contextMenu.removeChild(contextMenu.firstChild);\n          }\n        } else {\n          contextMenu = document.createElement('div');\n          contextMenu.classList.add('calendar-context-menu');\n          document.body.appendChild(contextMenu);\n        }\n\n        var date = this._getDate(elt);\n\n        var events = this.getEvents(date);\n\n        for (var i = 0; i < events.length; i++) {\n          var eventItem = document.createElement('div');\n          eventItem.classList.add('item');\n          eventItem.style.borderLeft = \"4px solid \".concat(events[i].color);\n          var eventItemContent = document.createElement('div');\n          eventItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = events[i].name;\n          eventItemContent.appendChild(text);\n          var icon = document.createElement('span');\n          icon.classList.add('arrow');\n          icon.innerHTML = \"&rsaquo;\";\n          eventItemContent.appendChild(icon);\n          eventItem.appendChild(eventItemContent);\n\n          this._renderContextMenuItems(eventItem, this.options.contextMenuItems, events[i]);\n\n          contextMenu.appendChild(eventItem);\n        }\n\n        if (contextMenu.children.length > 0) {\n          var position = this._getElementPosition(elt);\n\n          contextMenu.style.left = position.left + 25 + 'px';\n          contextMenu.style.top = position.top + 25 + 'px';\n          contextMenu.style.display = 'block';\n          window.addEventListener('click', function (e) {\n            if (!contextMenu.contains(e.target)) {\n              contextMenu.style.display = 'none';\n            }\n          }, {\n            once: true\n          });\n        }\n      }\n    }, {\n      key: \"_renderContextMenuItems\",\n      value: function _renderContextMenuItems(parent, items, evt) {\n        var subMenu = document.createElement('div');\n        subMenu.classList.add('submenu');\n\n        for (var i = 0; i < items.length; i++) {\n          if (items[i].visible === false || typeof items[i].visible === \"function\" && !items[i].visible(evt)) {\n            continue;\n          }\n\n          var menuItem = document.createElement('div');\n          menuItem.classList.add('item');\n          var menuItemContent = document.createElement('div');\n          menuItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = items[i].text;\n          menuItemContent.appendChild(text);\n\n          if (items[i].click) {\n            (function (index) {\n              menuItemContent.addEventListener('click', function () {\n                document.querySelector('.calendar-context-menu').style.display = 'none';\n                items[index].click(evt);\n              });\n            })(i);\n          }\n\n          menuItem.appendChild(menuItemContent);\n\n          if (items[i].items && items[i].items.length > 0) {\n            var icon = document.createElement('span');\n            icon.classList.add('arrow');\n            icon.innerHTML = \"&rsaquo;\";\n            menuItemContent.appendChild(icon);\n\n            this._renderContextMenuItems(menuItem, items[i].items, evt);\n          }\n\n          subMenu.appendChild(menuItem);\n        }\n\n        if (subMenu.children.length > 0) {\n          parent.appendChild(subMenu);\n        }\n      }\n    }, {\n      key: \"_getDate\",\n      value: function _getDate(elt) {\n        var day = elt.querySelector('.day-content').textContent;\n        var month = elt.closest('.month-container').dataset.monthId;\n        var year = this.options.startYear;\n        return new Date(year, month, day);\n      }\n    }, {\n      key: \"_triggerEvent\",\n      value: function _triggerEvent(eventName, parameters) {\n        var event = null;\n\n        if (typeof Event === \"function\") {\n          event = new Event(eventName);\n        } else {\n          event = document.createEvent('Event');\n          event.initEvent(eventName, false, false);\n        }\n\n        event.calendar = this;\n\n        for (var i in parameters) {\n          event[i] = parameters[i];\n        }\n\n        this.element.dispatchEvent(event);\n        return event;\n      }\n    }, {\n      key: \"_isDisabled\",\n      value: function _isDisabled(date) {\n        if (this.options.minDate != null && date < this.options.minDate || this.options.maxDate != null && date > this.options.maxDate) {\n          return true;\n        }\n\n        if (this.options.disabledWeekDays.length > 0) {\n          for (var d = 0; d < this.options.disabledWeekDays.length; d++) {\n            if (date.getDay() == this.options.disabledWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        if (this.options.disabledDays.length > 0) {\n          for (var d = 0; d < this.options.disabledDays.length; d++) {\n            if (date.getTime() == this.options.disabledDays[d].getTime()) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n    }, {\n      key: \"_isHidden\",\n      value: function _isHidden(day) {\n        if (this.options.hiddenWeekDays.length > 0) {\n          for (var d = 0; d < this.options.hiddenWeekDays.length; d++) {\n            if (day == this.options.hiddenWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n      /**\r\n          * Gets the week number for a specified date.\r\n          *\r\n          * @param date The specified date.\r\n          */\n\n    }, {\n      key: \"getWeekNumber\",\n      value: function getWeekNumber(date) {\n        // Algorithm from https://weeknumber.net/how-to/javascript\n        var workingDate = new Date(date.getTime());\n        workingDate.setHours(0, 0, 0, 0); // Thursday in current week decides the year.\n\n        workingDate.setDate(workingDate.getDate() + 3 - (workingDate.getDay() + 6) % 7); // January 4 is always in week 1.\n\n        var week1 = new Date(workingDate.getFullYear(), 0, 4); // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n\n        return 1 + Math.round(((workingDate.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\n      }\n      /**\r\n          * Gets the data source elements for a specified day.\r\n          *\r\n          * @param date The specified day.\r\n          */\n\n    }, {\n      key: \"getEvents\",\n      value: function getEvents(date) {\n        return this.getEventsOnRange(date, new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1));\n      }\n      /**\r\n          * Gets the data source elements for a specified range of days.\r\n          *\r\n          * @param startDate The beginning of the day range (inclusive).\r\n       * @param endDate The end of the day range (non inclusive).\r\n          */\n\n    }, {\n      key: \"getEventsOnRange\",\n      value: function getEventsOnRange(startDate, endDate) {\n        var events = [];\n\n        if (this._dataSource && startDate && endDate) {\n          for (var i = 0; i < this._dataSource.length; i++) {\n            if (this._dataSource[i].startDate < endDate && this._dataSource[i].endDate >= startDate) {\n              events.push(this._dataSource[i]);\n            }\n          }\n        }\n\n        return events;\n      }\n      /**\r\n          * Check if there is no event on the first part, last part or on the whole specified day.\r\n          *\r\n          * @param date The specified day.\r\n          * @param after Whether to check for a free slot on the first part (if `false`) or the last part (if `true`) of the day. If `null`, this will check on the whole day.\r\n       * \r\n       * Usefull only if using the `alwaysHalfDay` option of the calendar, or the `startHalfDay` or `endHalfDay` option of the datasource.\r\n          */\n\n    }, {\n      key: \"isThereFreeSlot\",\n      value: function isThereFreeSlot(date) {\n        var _this4 = this;\n\n        var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var events = this.getEvents(date);\n\n        if (after === true) {\n          return !events.some(function (evt) {\n            return !_this4.options.alwaysHalfDay && !evt.endHalfDay || evt.endDate > date;\n          });\n        } else if (after === false) {\n          return !events.some(function (evt) {\n            return !_this4.options.alwaysHalfDay && !evt.startHalfDay || evt.startDate < date;\n          });\n        } else {\n          return this.isThereFreeSlot(date, false) || this.isThereFreeSlot(date, true);\n        }\n      }\n      /**\r\n          * Gets the year displayed on the calendar.\r\n          */\n\n    }, {\n      key: \"getYear\",\n      value: function getYear() {\n        return this.options.startYear;\n      }\n      /**\r\n          * Sets the year displayed on the calendar.\r\n          *\r\n          * @param year The year to displayed on the calendar.\r\n          */\n\n    }, {\n      key: \"setYear\",\n      value: function setYear(year) {\n        var _this5 = this;\n\n        var parsedYear = parseInt(year);\n\n        if (!isNaN(parsedYear)) {\n          this.options.startYear = parsedYear; // Clear the calendar (faster method)\n\n          while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n          }\n\n          if (this.options.displayHeader) {\n            this._renderHeader();\n          }\n\n          var eventResult = this._triggerEvent('yearChanged', {\n            currentYear: this.options.startYear,\n            preventRendering: false\n          });\n\n          if (typeof this.options.dataSource === \"function\") {\n            this.render(true);\n\n            this._fetchDataSource(function (dataSource) {\n              _this5._dataSource = dataSource;\n\n              _this5._initializeDatasourceColors();\n\n              _this5.render(false);\n            });\n          } else {\n            if (!eventResult.preventRendering) {\n              this.render();\n            }\n          }\n        }\n      }\n      /**\r\n          * Gets the minimum date of the calendar.\r\n          */\n\n    }, {\n      key: \"getMinDate\",\n      value: function getMinDate() {\n        return this.options.minDate;\n      }\n      /**\r\n          * Sets the minimum date of the calendar.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param minDate The minimum date to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setMinDate\",\n      value: function setMinDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.minDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the maximum date of the calendar.\r\n          */\n\n    }, {\n      key: \"getMaxDate\",\n      value: function getMaxDate() {\n        return this.options.maxDate;\n      }\n      /**\r\n          * Sets the maximum date of the calendar. \r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param maxDate The maximum date to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setMaxDate\",\n      value: function setMaxDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.maxDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the current style used for displaying data source.\r\n          */\n\n    }, {\n      key: \"getStyle\",\n      value: function getStyle() {\n        return this.options.style;\n      }\n      /**\r\n          * Sets the style to use for displaying data source. \r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param style The style to use for displaying data source (\"background\", \"border\" or \"custom\").\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setStyle\",\n      value: function setStyle(style) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.style = style == 'background' || style == 'border' || style == 'custom' ? style : 'border';\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\r\n          */\n\n    }, {\n      key: \"getAllowOverlap\",\n      value: function getAllowOverlap() {\n        return this.options.allowOverlap;\n      }\n      /**\r\n          * Sets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\r\n          *\r\n          * @param allowOverlap Indicates whether the user can select a range which overlapping an other element present in the datasource.\r\n          */\n\n    }, {\n      key: \"setAllowOverlap\",\n      value: function setAllowOverlap(allowOverlap) {\n        this.options.allowOverlap = allowOverlap;\n      }\n      /**\r\n          * Gets a value indicating whether the weeks number are displayed.\r\n          */\n\n    }, {\n      key: \"getDisplayWeekNumber\",\n      value: function getDisplayWeekNumber() {\n        return this.options.displayWeekNumber;\n      }\n      /**\r\n          * Sets a value indicating whether the weeks number are displayed.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param  displayWeekNumber Indicates whether the weeks number are displayed.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayWeekNumber\",\n      value: function setDisplayWeekNumber(displayWeekNumber) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayWeekNumber = displayWeekNumber;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the calendar header is displayed.\r\n          */\n\n    }, {\n      key: \"getDisplayHeader\",\n      value: function getDisplayHeader() {\n        return this.options.displayHeader;\n      }\n      /**\r\n          * Sets a value indicating whether the calendar header is displayed.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param displayHeader Indicates whether the calendar header is displayed.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayHeader\",\n      value: function setDisplayHeader(displayHeader) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayHeader = displayHeader;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the data source must be rendered on disabled days.\r\n          */\n\n    }, {\n      key: \"getDisplayDisabledDataSource\",\n      value: function getDisplayDisabledDataSource() {\n        return this.options.displayDisabledDataSource;\n      }\n      /**\r\n          * Sets a value indicating whether the data source must be rendered on disabled days.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param displayDisabledDataSource Indicates whether the data source must be rendered on disabled days.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisplayDisabledDataSource\",\n      value: function setDisplayDisabledDataSource(displayDisabledDataSource) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayDisabledDataSource = displayDisabledDataSource;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\r\n          */\n\n    }, {\n      key: \"getAlwaysHalfDay\",\n      value: function getAlwaysHalfDay() {\n        return this.options.alwaysHalfDay;\n      }\n      /**\r\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param alwaysHalfDay Indicates whether the beginning and the end of each range should be displayed as half selected day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setAlwaysHalfDay\",\n      value: function setAlwaysHalfDay(alwaysHalfDay) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.alwaysHalfDay = alwaysHalfDay;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the user can make range selection.\r\n          */\n\n    }, {\n      key: \"getEnableRangeSelection\",\n      value: function getEnableRangeSelection() {\n        return this.options.enableRangeSelection;\n      }\n      /**\r\n          * Sets a value indicating whether the user can make range selection.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param enableRangeSelection Indicates whether the user can make range selection.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setEnableRangeSelection\",\n      value: function setEnableRangeSelection(enableRangeSelection) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableRangeSelection = enableRangeSelection;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the disabled days.\r\n          */\n\n    }, {\n      key: \"getDisabledDays\",\n      value: function getDisabledDays() {\n        return this.options.disabledDays;\n      }\n      /**\r\n          * Sets the disabled days.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param disableDays The disabled days to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisabledDays\",\n      value: function setDisabledDays(disabledDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledDays = disabledDays instanceof Array ? disabledDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the disabled days of the week.\r\n          */\n\n    }, {\n      key: \"getDisabledWeekDays\",\n      value: function getDisabledWeekDays() {\n        return this.options.disabledWeekDays;\n      }\n      /**\r\n          * Sets the disabled days of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param disabledWeekDays The disabled days of the week to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDisabledWeekDays\",\n      value: function setDisabledWeekDays(disabledWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledWeekDays = disabledWeekDays instanceof Array ? disabledWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the hidden days of the week.\r\n          */\n\n    }, {\n      key: \"getHiddenWeekDays\",\n      value: function getHiddenWeekDays() {\n        return this.options.hiddenWeekDays;\n      }\n      /**\r\n          * Sets the hidden days of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param hiddenWeekDays The hidden days of the week to set.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setHiddenWeekDays\",\n      value: function setHiddenWeekDays(hiddenWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.hiddenWeekDays = hiddenWeekDays instanceof Array ? hiddenWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\r\n          */\n\n    }, {\n      key: \"getRoundRangeLimits\",\n      value: function getRoundRangeLimits() {\n        return this.options.roundRangeLimits;\n      }\n      /**\r\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param roundRangeLimits Indicates whether the beginning and the end of each range should be displayed as rounded cells. \r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setRoundRangeLimits\",\n      value: function setRoundRangeLimits(roundRangeLimits) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.roundRangeLimits = roundRangeLimits;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets a value indicating whether the default context menu must be displayed when right clicking on a day.\r\n          */\n\n    }, {\n      key: \"getEnableContextMenu\",\n      value: function getEnableContextMenu() {\n        return this.options.enableContextMenu;\n      }\n      /**\r\n          * Sets a value indicating whether the default context menu must be displayed when right clicking on a day. \r\n          * \r\n       * This method causes a refresh of the calendar.\r\n          * \r\n          * @param enableContextMenu Indicates whether the default context menu must be displayed when right clicking on a day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setEnableContextMenu\",\n      value: function setEnableContextMenu(enableContextMenu) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableContextMenu = enableContextMenu;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the context menu items.\r\n          */\n\n    }, {\n      key: \"getContextMenuItems\",\n      value: function getContextMenuItems() {\n        return this.options.contextMenuItems;\n      }\n      /**\r\n          * Sets new context menu items.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param contextMenuItems The new context menu items.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setContextMenuItems\",\n      value: function setContextMenuItems(contextMenuItems) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.contextMenuItems = contextMenuItems instanceof Array ? contextMenuItems : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the custom day renderer.\r\n          */\n\n    }, {\n      key: \"getCustomDayRenderer\",\n      value: function getCustomDayRenderer() {\n        return this.options.customDayRenderer;\n      }\n      /**\r\n          * Sets the custom day renderer.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n       *\r\n       * @param handler The function used to render the days. This function is called during render for each day.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setCustomDayRenderer\",\n      value: function setCustomDayRenderer(customDayRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDayRenderer = typeof customDayRenderer === \"function\" ? customDayRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the custom data source renderer.\r\n          */\n\n    }, {\n      key: \"getCustomDataSourceRenderer\",\n      value: function getCustomDataSourceRenderer() {\n        return this.options.customDataSourceRenderer;\n      }\n      /**\r\n          * Sets the custom data source renderer. Works only with the style set to \"custom\".\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n       *\r\n       * @param handler The function used to render the data source. This function is called during render for each day containing at least one event.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setCustomDataSourceRenderer\",\n      value: function setCustomDataSourceRenderer(customDataSourceRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDataSourceRenderer = typeof customDataSourceRenderer === \"function\" ? customDataSourceRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the language used for calendar rendering.\r\n          */\n\n    }, {\n      key: \"getLanguage\",\n      value: function getLanguage() {\n        return this.options.language;\n      }\n      /**\r\n          * Sets the language used for calendar rendering.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param language The language to use for calendar redering.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setLanguage\",\n      value: function setLanguage(language) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (language != null && Calendar.locales[language] != null) {\n          this.options.language = language;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the current data source.\r\n          */\n\n    }, {\n      key: \"getDataSource\",\n      value: function getDataSource() {\n        return this.options.dataSource;\n      }\n      /**\r\n          * Sets a new data source.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param dataSource The new data source.\r\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setDataSource\",\n      value: function setDataSource(dataSource) {\n        var _this6 = this;\n\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.dataSource = dataSource instanceof Array || typeof dataSource === \"function\" ? dataSource : [];\n\n        if (typeof this.options.dataSource === \"function\") {\n          this.render(true);\n\n          this._fetchDataSource(function (dataSource) {\n            _this6._dataSource = dataSource;\n\n            _this6._initializeDatasourceColors();\n\n            _this6.render(false);\n          });\n        } else {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\r\n          * Gets the starting day of the week.\r\n          */\n\n    }, {\n      key: \"getWeekStart\",\n      value: function getWeekStart() {\n        return this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n      }\n      /**\r\n          * Sets the starting day of the week.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          *\r\n          * @param weekStart The starting day of the week. This option overrides the parameter define in the language file.\r\n          * @param preventRedering Indicates whether the rendering should be prevented after the property update.\r\n          */\n\n    }, {\n      key: \"setWeekStart\",\n      value: function setWeekStart(weekStart) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.weekStart = !isNaN(parseInt(weekStart)) ? parseInt(weekStart) : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\r\n          * Gets the loading template.\r\n          */\n\n    }, {\n      key: \"getLoadingTemplate\",\n      value: function getLoadingTemplate() {\n        return this.options.loadingTemplate;\n      }\n      /**\r\n          * Sets the loading template.\r\n          *\r\n          * @param loadingTemplate The loading template.\r\n          */\n\n    }, {\n      key: \"setLoadingTemplate\",\n      value: function setLoadingTemplate(loadingTemplate) {\n        this.options.loadingTemplate = typeof loadingTemplate === \"string\" || loadingTemplate instanceof HTMLElement ? loadingTemplate : null;\n      }\n      /**\r\n       * \r\n          * Add a new element to the data source.\r\n       * \r\n       * This method causes a refresh of the calendar.\r\n          * \r\n          * @param element The element to add.\r\n       * @param preventRendering Indicates whether the calendar shouldn't be refreshed once the event added.\r\n          */\n\n    }, {\n      key: \"addEvent\",\n      value: function addEvent(evt) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        this._dataSource.push(evt);\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n    }]);\n\n    return Calendar;\n  }();\n\n  _exports.default = Calendar;\n\n  _defineProperty(Calendar, \"locales\", {\n    en: {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      weekShort: 'W',\n      weekStart: 0\n    }\n  });\n\n  _defineProperty(Calendar, \"colors\", ['#2C8FC9', '#9CB703', '#F5BB00', '#FF4A32', '#B56CE2', '#45A597']);\n\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") {\n    window.Calendar = Calendar;\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      document.querySelectorAll('[data-provide=\"calendar\"]').forEach(function (element) {\n        return new Calendar(element);\n      });\n    });\n  }\n});","/**\r\n * French translation for js-year-calendar\r\n * Paul DAVID-SIVELLE\r\n * Based on \r\n * French translation for bootstrap-datepicker\r\n * Nico Mollet <nico.mollet@gmail.com>\r\n */\r\n \r\nCalendar.locales['fr'] = {\r\n\tdays: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\tdaysShort: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"],\r\n\tdaysMin: [\"D\", \"L\", \"Ma\", \"Me\", \"J\", \"V\", \"S\"],\r\n\tmonths: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\tmonthsShort: [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Jui\", \"Jul\", \"Aou\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"],\r\n\tweekShort:'S',\r\n\tweekStart: 1\r\n};","// declare const Calendar: any;\r\nimport Calendar from 'js-year-calendar';\r\nimport 'js-year-calendar/locales/js-year-calendar.fr';\r\ndeclare const $: any;\r\n\r\n/** arbitrary sclaing value for nice luma coloring */\r\nconst maxVar1000Nuitées = {\r\n  '09': 5,\r\n  '11': 15,\r\n  '12': 7,\r\n  '30': 20,\r\n  '31': 30,\r\n  '32': 5,\r\n  '34': 40,\r\n  '46': 7,\r\n  '48': 4,\r\n  '65': 8,\r\n  '66': 20,\r\n  '81': 7,\r\n  '82': 7\r\n};\r\n\r\n// add fiestas\r\nconst fiestas = [];\r\n/** display variation or value */\r\nexport type ValueToDisplay = 'val' | 'var';\r\n\r\nlet currentDep: string;\r\n\r\nexport function setCurrentDep(_currentDep: string) {\r\n  currentDep = _currentDep;\r\n}\r\nexport function loadEventsAndNuitées(\r\n  currentDep: string,\r\n  currentValueType: ValueToDisplay\r\n) {\r\n  const onLoadFiestas = () => {\r\n    const dateFrToDate = (dateStr: string) => {\r\n      const dateArr = dateStr.split('/');\r\n      return new Date(\r\n        Number(dateArr[2]),\r\n        Number(dateArr[1]) - 1,\r\n        Number(dateArr[0])\r\n      );\r\n    };\r\n\r\n    const csvFile = oReqFiestas.responseText.split('\\n');\r\n\r\n    for (let i = 1; i < csvFile.length; i++) {\r\n      if (csvFile[i].length > 0) {\r\n        const values = csvFile[i].split(',');\r\n        if (values) {\r\n          fiestas.push({\r\n            dep: values[0],\r\n            startDate: dateFrToDate(values[2]),\r\n            endDate: dateFrToDate(values[3]),\r\n            event: values[1]\r\n          });\r\n        }\r\n      }\r\n    }\r\n    // renderGraphAndCalendar(currentDep, currentValueType);\r\n    setCurrentDep(currentDep);\r\n    renderCalendar(currentDep, currentValueType);\r\n  };\r\n  const oReqFiestas = new XMLHttpRequest();\r\n  oReqFiestas.onload = onLoadFiestas;\r\n  oReqFiestas.onerror = reqError;\r\n  oReqFiestas.open('get', `assets/datasources/complements.csv`, true);\r\n  oReqFiestas.send();\r\n}\r\n\r\nfunction reqError(err: any) {\r\n  console.log('Fetch Error :-S', err);\r\n}\r\n\r\nexport function renderCalendar(depNumber: string, valueType: string) {\r\n  const renderVariations = valueType === 'var';\r\n  const calendar = new Calendar(document.getElementById('calendar'), {\r\n    minDate: new Date(2018, 0, 1),\r\n    maxDate: new Date(new Date(2019, 0, 1).getTime() - 1),\r\n    startYear: 2018,\r\n    language: 'fr',\r\n    style: 'background',\r\n    displayHeader: false,\r\n    renderEnd: (e: any) => {\r\n      // force flex\r\n      const calendarInner: HTMLElement = document.querySelector(\r\n        '.months-container'\r\n      );\r\n      calendarInner.style.display = 'flex';\r\n      calendarInner.style.flexWrap = 'wrap';\r\n      calendarInner.style.justifyContent = 'space-around';\r\n      calendarInner.style.alignContent = 'space-around';\r\n    },\r\n    loadingTemplate: undefined,\r\n    customDayRenderer: (cellContent: HTMLElement, currentDate: Date) => {\r\n      const filteredFiestas = fiestas.filter(\r\n        fiesta => fiesta.dep === currentDep\r\n      );\r\n      filteredFiestas.forEach(fiesta => {\r\n        if (\r\n          fiesta.startDate.getTime() <= currentDate &&\r\n          currentDate <= fiesta.endDate.getTime()\r\n        ) {\r\n          //cellContent.style.fontWeight = 'bolder';\r\n          cellContent.style.textDecoration = 'underline dotted';\r\n          \r\n        }\r\n      });\r\n    },\r\n    mouseOnDay: (e: { events: any; date: Date; element: HTMLElement }) => {\r\n      if (e.events.length > 0) {\r\n        var content = '';\r\n        let fiestaStr = '';\r\n        const currentDate = new Date(e.date).getTime();\r\n        fiestaStr += '';\r\n        const filteredFiestas = fiestas.filter(\r\n          fiesta => fiesta.dep === currentDep\r\n        );\r\n        filteredFiestas.forEach(fiesta => {\r\n          if (\r\n            fiesta.startDate.getTime() <= currentDate &&\r\n            currentDate <= fiesta.endDate.getTime()\r\n          ) {\r\n            fiestaStr +=\r\n              '<div class=\"event-name\"> ⚬&nbsp;&nbsp;' +\r\n              fiesta.event +\r\n              '</div>';\r\n          }\r\n        });\r\n        for (var i in e.events) {\r\n          content +=\r\n            '<div class=\"event-tooltip-content\">' +\r\n            fiestaStr +\r\n            '<div class=\"event-value\">' +\r\n            e.events[i].value +\r\n            ' nuitées</div>';\r\n        }\r\n        $(e.element).popover({\r\n          placement: 'top',\r\n          trigger: 'manual',\r\n          container: '.calendar',\r\n          html: true,\r\n          content: content\r\n        });\r\n        $(e.element).popover('show');\r\n      }\r\n    },\r\n    mouseOutDay: (e: { events: string | any[]; element: any }) => {\r\n      if (e.events.length > 0) {\r\n        $(e.element).popover('hide');\r\n      }\r\n    }\r\n  });\r\n  const varNuitées = [];\r\n  const dateISOToDate = (dateStr: string) => {\r\n    const dateArr = dateStr.split('-');\r\n    return new Date(\r\n      Number(dateArr[0]),\r\n      Number(dateArr[1]) - 1,\r\n      Number(dateArr[2])\r\n    );\r\n  };\r\n  function varNuitéesToLuminanceHue(nbVar: number, maxVar: number) {\r\n    const frac = Math.min(1, Math.abs(nbVar) / maxVar);\r\n    return 100 - Math.floor(frac * 50) + '%';\r\n  }\r\n  function varNuitéesToColor(varNuitée: { value: number }) {\r\n    return `hsl(${\r\n      varNuitée.value < 0 ? 0 : 124\r\n    },100%,${varNuitéesToLuminanceHue(\r\n      varNuitée.value,\r\n      maxVar1000Nuitées[depNumber] * 1000\r\n    )})`;\r\n  }\r\n  function valAbsNuitéesToColor(\r\n    varNuitée: {\r\n      value: number;\r\n    },\r\n    maxVar: number\r\n  ) {\r\n    const frac = Math.min(1, (Math.abs(varNuitée.value) / maxVar) * 0.75) * 100;\r\n    if (frac < 20) return '#ffffb2';\r\n    if (frac < 40) return '#fecc5c';\r\n    if (frac < 60) return '#fd8d3c';\r\n    if (frac < 80) return '#f03b20';\r\n    if (frac < 100) return '#bd0026';\r\n  }\r\n  function onLoadOrigins() {\r\n    const csvFile = this.responseText.split('\\n');\r\n    for (let i = 1; i < csvFile.length; i++) {\r\n      if (csvFile[i].length > 0) {\r\n        const values = csvFile[i].split(',');\r\n        varNuitées.push({\r\n          id: i,\r\n          startDate: dateISOToDate(values[0]),\r\n          endDate: dateISOToDate(values[0]),\r\n          value: Number(values[renderVariations ? 1 : 2])\r\n        });\r\n      }\r\n    }\r\n    let maxVal = 0;\r\n    varNuitées.forEach(\r\n      varNuitée => (maxVal = Math.max(maxVal, varNuitée.value))\r\n    );\r\n    varNuitées.forEach(\r\n      varNuitée =>\r\n        (varNuitée.color = renderVariations\r\n          ? varNuitéesToColor(varNuitée)\r\n          : valAbsNuitéesToColor(varNuitée, maxVal))\r\n    );\r\n    calendar.setDataSource(varNuitées);\r\n  }\r\n  var oReqOrigin = new XMLHttpRequest();\r\n  oReqOrigin.onload = onLoadOrigins;\r\n  oReqOrigin.onerror = reqError;\r\n  oReqOrigin.open(\r\n    'get',\r\n    `assets/datasources/par_origin_agg_${depNumber}.csv`,\r\n    true\r\n  );\r\n  oReqOrigin.send();\r\n}\r\n","// import {renderGraph} from './renderGraph';\r\nimport {\r\n  ValueToDisplay,\r\n  loadEventsAndNuitées,\r\n  setCurrentDep,\r\n  renderCalendar\r\n} from './renderCalendar';\r\n\r\n/** current département number*/\r\nconst currentDep = '09';\r\n/** display variation or value */\r\nlet currentValueType: ValueToDisplay = 'val';\r\n\r\nfunction renderGraphAndCalendar(depNumber: string, valueType: string) {\r\n  // renderGraph(depNumber);\r\n  //'var'\r\n  setCurrentDep(depNumber);\r\n  renderCalendar(depNumber, valueType);\r\n}\r\n\r\nloadEventsAndNuitées(currentDep, currentValueType);\r\n\r\nconst selectElement: HTMLSelectElement = document.querySelector('#depSelector');\r\nselectElement.addEventListener('change', event => {\r\n  const selectedDep = (event.target as any).value;\r\n  renderGraphAndCalendar(selectedDep, currentValueType);\r\n});\r\n\r\nconst valButtonElement: HTMLButtonElement = document.querySelector('#val');\r\nvalButtonElement.addEventListener('click', _event => {\r\n  currentValueType = 'val';\r\n  renderGraphAndCalendar(selectElement.value, currentValueType);\r\n});\r\n\r\nconst varButtonElement: HTMLButtonElement = document.querySelector('#var');\r\nvarButtonElement.addEventListener('click', _event => {\r\n  currentValueType = 'var';\r\n  renderGraphAndCalendar(selectElement.value, currentValueType);\r\n});\r\n"],"sourceRoot":""}